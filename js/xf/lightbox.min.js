((f,h)=>{XF.Lightbox=XF.Element.newHandler({options:{lbInfobar:1,lbSlideShow:1,lbThumbsAuto:1,lbUniversal:0,lbTrigger:".js-lbImage",lbContainer:".js-lbContainer",lbHistory:0,lbPrev:null,lbNext:null},fancybox:null,sidebar:null,sidebarToggle:null,initialUrl:null,prevUrl:null,nextUrl:null,thumbsInitialized:!1,lastIndex:null,isJumping:!1,pushStateCount:0,init(){this.initContainers();XF.on(h,"xf:reinit",this.checkReInit.bind(this));XF.onDelegated(h,"click","a.js-lightboxCloser",a=>{this.getInstance().close()})},
getInstance(){return Fancybox.getInstance()},handlePopstate(a){if(this.options.lbHistory){var b=this.getInstance();this.pushStateCount--;a&&"object"===typeof a&&XF.hasOwn(a,"slide_src")?(this.isJumping=!0,b&&(a=b.findIndexFromSrc(a.slide_src),null!==a&&b.jumpTo(a))):b&&(this.pushStateCount=0,b.close())}},initContainers(){(this.options.lbUniversal?[this.target]:Array.from(this.target.querySelectorAll(this.options.lbContainer))).forEach(a=>this._initContainer(a))},_initContainer(a){if(!XF.DataStore.get(a,
"lbInitialized")){XF.DataStore.set(a,"lbInitialized",!0);var b=a.querySelectorAll(this.options.lbTrigger);Array.from(b).forEach(c=>{XF.trigger(c,"click.xflbtrigger",this._initTrigger.bind(this));XF.trigger(c,"mousedown.xflbtrigger",this._initTrigger.bind(this));XF.on(c,"lightbox:image-checked",this.imageChecked.bind(this));this.checkImageSizes(c,a)});b=this.getConfig(a);Fancybox.bind(`${this.options.lbTrigger}[data-fancybox="${this.getContainerId(a)}"]`,b);XF.on(a,"lightbox:init",this.onInit.bind(this));
XF.on(a,"lightbox:slide-displayed",this.onSlideDisplayed.bind(this));XF.on(a,"lightbox:should-close",this.onShouldClose.bind(this));XF.on(a,"lightbox:closed",this.onClosed.bind(this))}},_initTrigger(a){const b=a.target.parentNode;("mousedown"===a.type?2===a.which:a.ctrlKey||a.altKey||a.metaKey||a.shiftKey)&&this.isSingleImage(b)&&(a.stopImmediatePropagation(),f.open(b.dataset.src,"_blank"))},checkReInit({element:a}){if(a!==h&&this.target.contains(a)){var b=this.options.lbTrigger,c=this.options.lbContainer;
this.options.lbUniversal?(a.matches(b)||a.querySelector(b))&&this._reInitContainer(this.target):a.matches(c)||a.querySelector(c)?this.initContainers():a.closest(c)&&(a.matches(b)||a.querySelector(b))&&this._reInitContainer(a.closest(c))}},_reInitContainer(a){if(XF.DataStore.get(a,"lbInitialized")){var b=this.getInstance();b&&b.close();XF.DataStore.remove(a,"lbInitialized");XF.off(a,"onThumbsShow.fb");XF.off(a,"onThumbsHide.fb");this.thumbsInitialized=!1;XF.off(a,"lightbox:init");XF.off(a,"lightbox:activate");
XF.off(a,"lightbox:reveal");XF.off(a,"lightbox:done");XF.off(a,"lightbox:should-close");XF.off(a,"lightbox:closed");this._initContainer(a)}},initSidebar(a){var b=this.getInstance();b&&(b=b.container,this.sidebar?a&&this.sidebar.classList.add("is-loading"):(this.sidebar=XF.createElementFromString(`<div class="fancybox-sidebar ${a?"is-loading":""}">
					<div class="fancybox-sidebar-content"></div>
					<div class="fancybox-sidebar-loader">${XF.Icon.getIcon("default","spinner-third","fa-4x")}</div>
				</div>`),b.append(this.sidebar),this.sidebarToggle=a=b.querySelector(".f-button[data-fancybox-sidebartoggle]"),XF.off(a,"click.lbSidebar"),XF.on(a,"click.lbSidebar",this.toggleSidebar.bind(this)),XF.on(f,"resize.lbSidebar",this.sidebarCheckSize.bind(this))),b.classList.add("fancybox-has-sidebar"),this.isSidebarEnabled()?(this.sidebar.classList.add("is-active"),b.classList.add("fancybox-show-sidebar"),this.updateSidebarIcon(!0)):this.updateSidebarIcon(!1),this.sidebarCheckSize())},isSidebarEnabled(){return!XF.LocalStorage.get("lbSidebarDisabled")&&
XF.Breakpoint.isAtOrWiderThan("full")},setIsSidebarEnabled(a){a?XF.LocalStorage.remove("lbSidebarDisabled"):XF.LocalStorage.set("lbSidebarDisabled","1",!0)},toggleSidebar(){this.sidebar.classList.contains("is-active")?this.closeSidebar(!1):this.openSidebar(!1)},openSidebar(a){var b=this.getInstance();b&&(b=b.container,this.sidebar.classList.add("is-active"),b.classList.add("fancybox-show-sidebar"),this.updateSidebarIcon(!0),a||this.setIsSidebarEnabled(!0))},closeSidebar(a){if(this.sidebar){var b=
this.getInstance().container;this.sidebar.classList.remove("is-active");b.classList.remove("fancybox-show-sidebar");this.updateSidebarIcon(!1);a||this.setIsSidebarEnabled(!1)}},updateSidebarIcon(a){a=a?this.sidebarToggleClose:this.sidebarToggleOpen;this.sidebarToggle.querySelector("svg").replaceWith(XF.createElementFromString(a))},sidebarCheckSize(){const a=this.getInstance().container;XF.Breakpoint.isAtOrNarrowerThan("medium")?(a.classList.remove("fancybox-has-sidebar"),this.closeSidebar(!0)):a.classList.add("fancybox-has-sidebar")},
initThumbs(){var a=this.getInstance();if(a&&(a=a.container,!this.thumbsInitialized)){if(this.options.lbThumbsAuto){var b=this.measureThumbsScrollbar();this.setThumbsScrollbarOffset(b)}XF.off(a,"onThumbsShow.fb");XF.on(a,"onThumbsShow.fb",()=>{b=this.measureThumbsScrollbar();this.setThumbsScrollbarOffset(b)});XF.off(a,"onThumbsHide.fb");XF.on(a,"onThumbsHide.fb",()=>this.setThumbsScrollbarOffset(0));this.thumbsInitialized=!0}},measureThumbsScrollbar(){const a=this.getInstance();return a&&a.Thumbs&&
a.Thumbs.isActive?XF.measureScrollBar(a.Thumbs.grid,"height"):0},setThumbsScrollbarOffset(a){const b=this.getInstance();b&&b.Thumbs&&b.Thumbs.isActive&&(b.refs.caption.style.paddingBottom=a+"px")},updateLastIndex(){this.getInstance()},onInit(){this.updateLastIndex();this.initialUrl=f.location.href;this.prevUrl=this.options.lbPrev;this.nextUrl=this.options.lbNext;this.thumbsInitialized=!1;XF.Modal.open();XF.Lightbox.activeLb=this},onSlideDisplayed({instance:a,slide:b}){if("ajax"===b.type){var c=b.contentEl.querySelector(".js-embedContent"),
d={};c&&(d[c.dataset.mediaSiteId]=!0,XF.applyJsState(XF.config.jsState,d),b.slide.classList.remove("fancybox-slide--video"),b.slide.classList.add("fancybox-slide--embed"))}XF.hideOverlays();XF.hideTooltips();c=b.triggerEl;d=a.container;c?(a=a.container,c.dataset.lbSidebar||c.dataset.lbSidebarHref?this.initSidebar(!0):(a.classList.remove("fancybox-has-sidebar"),this.closeSidebar(!0)),c.dataset.lbTypeOverride&&(b.contentType=c.dataset.lbTypeOverride),a=c.getAttribute("href")||b.src):a=b.src;this.initThumbs();
const g=d.querySelector(".fancybox__toolbar").querySelector("[data-fancybox-nw]");g&&(g.setAttribute("href",a),g.setAttribute("target","_blank"));this.options.lbHistory&&!this.isJumping&&(XF.History.push({slide_src:b.src},null,a),this.pushStateCount++);this.isJumping=!1;(c.dataset.lbSidebar||c.dataset.lbSidebarHref)&&d.classList.contains("fancybox-has-sidebar")&&(c=c?c.dataset.lbSidebarHref||a:a,XF.ajax("get",c,{lightbox:!0},e=>this.sidebarLoaded(e),{skipDefault:!0,skipError:!0}));b.index===this.lastIndex&&
this.nextUrl?XF.ajax("get",this.nextUrl,{lightbox:!0},e=>this.nextLoaded(e),{skipDefault:!0,skipError:!0}):0===b.index&&this.prevUrl&&XF.ajax("get",this.prevUrl,{lightbox:!0},e=>this.prevLoaded(e),{skipDefault:!0,skipError:!0})},sidebarLoaded(a){a.html&&this.sidebar&&XF.setupHtmlInsert(a.html,(b,c,d)=>{this.sidebar&&(c=this.sidebar.querySelector(".fancybox-sidebar-content"),c.innerHTML="",c.append(b),this.sidebar.classList.remove("is-loading"))})},prevLoaded(a){if(a.html){var b=this.getInstance();
b&&XF.setupHtmlInsert(a.html,(c,d,g)=>{c=c.find(this.options.lbContainer);Array.from(c.querySelectorAll(this.options.lbTrigger)).reverse().forEach(e=>{this.updateCaption(e);b.prependContent(e);b.reindexSlides();e=b.currIndex;let k=b.prevIndex;e++;k++;b.currIndex=e;b.currPos=e;b.current.index=e;b.current.pos=e;b.prevIndex=k;b.prevPos=k});this.updateLastIndex();this.prevUrl=c.dataset.lbPrev;g(!0)})}else this.prevUrl=null},nextLoaded(a){if(a.html){var b=this.getInstance();b&&XF.setupHtmlInsert(a.html,
(c,d,g)=>{c=c.querySelector(this.options.lbContainer);c.querySelectorAll(this.options.lbTrigger).forEach(e=>{this.updateCaption(e);b.addContent(e)});this.updateLastIndex();this.nextUrl=c.dataset.lbNext;g(!0)})}else this.nextUrl=null},onShouldClose(a){this.options.lbHistory&&this.pushStateCount&&(f.history.replaceState(null,null,this.initialUrl),this.pushStateCount=0);this.sidebar&&(this.sidebar.remove(),this.sidebar=null,XF.off(f,"resize.lbSidebar"))},onClosed(){XF.Modal.close();XF.Lightbox.activeLb=
null},getContainerId(a){return"lb-"+a.dataset.lbId},imageChecked(a){const {target:b,container:c,image:d}=a;a=!0;d&&this.isImageNaturalSize(d)&&(a=!1);a&&(b.dataset.fancybox=this.getContainerId(c),b.style.cursor="pointer",this.updateCaption(b))},checkImageSizes(a,b){const c=XF.customEvent("lightbox:image-checked",{container:b});if(this.isSingleImage(a)){const d=a.querySelector('img[data-zoom-target="1"]');d&&!d.closest("a")&&setTimeout(()=>{c.image=d;if(d.complete)XF.trigger(a,c);else XF.on(d,"load",
()=>{XF.trigger(a,c)})},500)}else XF.trigger(a,c)},isImageNaturalSize(a){var b=a.width,c=a.height,d=a.naturalWidth;a=a.naturalHeight;return d&&a?b===d&&c===a:!0},isSingleImage(a){return a.matches("div")&&a.dataset.singleImage},updateCaption(a){if(!a.dataset.caption){var b=a.closest(this.options.lbContainer),c=a.querySelector("img"),d=b.dataset.lbId;b={title:b.dataset.lbCaptionTitle||c.getAttribute("alt")||c.getAttribute("title")||"",desc:a.dataset.lbCaptionDesc||b.dataset.lbCaptionDesc||"",href:a.dataset.lbCaptionHref||
(d?f.location.href.replace(/#.*$/,"")+"#"+d:null),extra_html:a.dataset.lbCaptionExtraHtml||""};a.setAttribute("data-caption",Mustache.render('<h4>{{title}}</h4><p><a href="{{href}}" class="js-lightboxCloser">{{desc}}</a>{{{extra_html}}}</p>',b))}},sidebarToggleClose:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevrons-right"><polyline points="13 17 18 12 13 7"></polyline><polyline points="6 17 11 12 6 7"></polyline></svg>',
sidebarToggleOpen:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevrons-left"><polyline points="11 17 6 12 11 7"></polyline><polyline points="18 17 13 12 18 7"></polyline></svg>',getConfig(a){return{l10n:this.getLanguage(),wheel:!1,Toolbar:{items:{newWindow:{tpl:'<button class="f-button" data-fancybox-newwindow><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line></svg></button>',
click(){const b=this.instance.getSlide(),c=null==b?void 0:b.type;c&&"image"===c&&f.open(b.src)}},toggleSidebar:{tpl:'<div class="fancybox-sidebartoggle"><button data-fancybox-sidebartoggle class="f-button"><svg></svg></button></div>'}},display:{right:"iterateZoom newWindow fullscreen slideshow download thumbs toggleSidebar close".split(" ")}},Hash:!1,Thumbs:{showOnStart:this.options.lbThumbsAuto},on:{init(b){b=XF.customEvent("lightbox:init",{container:a,instance:b});XF.trigger(a,b)},loaded(b,c){setTimeout(()=>
{const d=XF.customEvent("lightbox:loaded",{container:a,instance:b,slide:c});XF.trigger(a,d)},0)},reveal(b,c){b=XF.customEvent("lightbox:reveal",{container:a,instance:b,slide:c});XF.trigger(a,b)},"Carousel.ready Carousel.change":b=>{b=XF.customEvent("lightbox:slide-displayed",{container:a,instance:b,slide:b.getSlide()});XF.trigger(a,b)},done(b,c){b=XF.customEvent("lightbox:done",{container:a,instance:b,slide:c});XF.trigger(a,b)},shouldClose(b,c){b=XF.customEvent("lightbox:should-close",{container:a,
instance:b,slide:c});XF.trigger(a,b)},close(b,c){b=XF.customEvent("lightbox:closed",{container:a,instance:b,slide:c});XF.trigger(a,b)}}}},getLanguage(){return{CLOSE:XF.phrase("lightbox_close"),NEXT:XF.phrase("lightbox_next"),PREV:XF.phrase("lightbox_previous"),ERROR:XF.phrase("lightbox_error"),PLAY_START:XF.phrase("lightbox_start_slideshow"),PLAY_STOP:XF.phrase("lightbox_stop_slideshow"),FULL_SCREEN:XF.phrase("lightbox_full_screen"),THUMBS:XF.phrase("lightbox_thumbnails"),DOWNLOAD:XF.phrase("lightbox_download"),
SHARE:XF.phrase("lightbox_share"),ZOOM:XF.phrase("lightbox_zoom"),NEW_WINDOW:XF.phrase("lightbox_new_window"),SIDEBAR_TOGGLE:XF.phrase("lightbox_toggle_sidebar")}}});XF.Lightbox.activeLb=null;XF.on(h,"xf:reinit",a=>{({element:a}=a);if(a!=h){var b=a.closest("[data-xf-init~=lightbox]");b&&(XF.Element.getHandler(b,"lightbox")||setTimeout(()=>{XF.Element.initializeElement(b)},0))}});XF.History.handle(a=>{const b=XF.Lightbox.activeLb;if(b)return b.handlePopstate(a),!0});XF.Element.register("lightbox",
"XF.Lightbox")})(window,document);
