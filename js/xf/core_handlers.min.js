((m,k)=>{XF._baseInserterOptions={after:null,append:null,before:null,prepend:null,replace:null,removeOldSelector:!0,animateReplace:!0,animateDisplay:null,scrollTarget:null,href:null,afterLoad:null};XF.Inserter=XF.create({options:XF.extendObject(!0,{},XF._baseInserterOptions),target:null,href:null,loading:!1,__construct(a,b){this.target=a;this.options=XF.extendObject(!0,{},this.options,b);(a=this.options.href||this.target.dataset.inserterHref||this.target.getAttribute("href"))?this.href=a:console.error("Target must have href")},
onEvent(a,b){a.preventDefault();this.loading||(this.loading=!0,a=k.querySelectorAll(this.options.replace),a.length&&a.forEach(c=>XF.Transition.addClassTransitioned(c,"is-active")),XF.ajax("get",this.href,b||{},this.onLoad.bind(this)).finally(()=>{this.loading=!1}))},onLoad(a){if(a.html){var b=this.options,c=b.scrollTarget,d=b.afterLoad,e;c&&(e=XF.findRelativeIf(c,this.target));XF.setupHtmlInsert(a.html,(f,g,h)=>{this._applyChange(f,b.after,this._applyAfter.bind(this));this._applyChange(f,b.append,
this._applyAppend.bind(this));this._applyChange(f,b.before,this._applyBefore.bind(this));this._applyChange(f,b.prepend,this._applyPrepend.bind(this));this._applyChange(f,b.replace,this._applyReplace.bind(this));h(!0);d&&d(a);return!1});XF.layoutChange();e&&e.scrollIntoView(!0)}},_applyChange(a,b,c){if(b&&b.length){b=b.split(",");for(let f of b){f=f.split(" with ");b=f[0].trim();var d=f[1]?f[1].trim():b;if(b.length&&d.length){var e=k.querySelector(b);d=a.matches(d)?a:a.querySelector(d);c(b,e,d)}}}},
_applyAfter(a,b,c){b&&c&&(b.after(c),XF.activate(c),this._removeOldSelector(a,b))},_applyAppend(a,b,c){b&&c&&(XF.activate(c),Array.from(c.children).forEach(d=>b.appendChild(d)))},_applyBefore(a,b,c){b&&c&&(b.after(c),XF.activate(c),this._removeOldSelector(a,b))},_applyPrepend(a,b,c){b&&c&&(XF.activate(c),Array.from(c.children).reverse().forEach(d=>b.prepend(d)))},_applyReplace(a,b,c){b&&(a=this.options.animateReplace,XF.isIOS()&&(a=!1),c&&(a&&(XF.display(c,"none"),c.style.opacity=0),b.insertAdjacentElement("afterend",
c)),a?(a=()=>{b.remove();XF.layoutChange();c&&XF.activate(c);XF.Animate.fadeDown(c,{speed:XF.config.speed.normal,complete:XF.layoutChange,display:this.options.animateDisplay})},"none"===m.getComputedStyle(b).display?a():XF.Animate.fadeUp(b,{complete:a()})):(b.remove(),c&&XF.activate(c)))},_removeOldSelector(a,b){if(this.options.removeOldSelector){var c;(c=a.match(/^\.([a-z0-9_-]+)/i))&&b.classList.remove(c[1])}}});XF.MenuBuilder={actionBar(a,b,c){const d=a.querySelector(".js-menuBuilderTarget");b.closest(".actionBar-set").querySelectorAll(".actionBar-action--menuItem").forEach(e=>
{e=e.cloneNode(!0);e.className="menu-linkRow";d.appendChild(e)});XF.activate(d)},dataList(a,b,c){const d=a.querySelector(".js-menuBuilderTarget");b.closest(".dataList-row").querySelectorAll(".dataList-cell--responsiveMenuItem").forEach(e=>{Array.from(e.cloneNode(!0).children).forEach(f=>{if("a"===f.nodeName.toLowerCase())f.className="menu-linkRow";else{let g=XF.createElement("div",{className:"menu-row"});g.appendChild(f);f=g}d.appendChild(f)})});XF.activate(d)}};XF.MenuWatcher=(()=>{let a=[],b=null,
c=!1,d=!1;const e=h=>{d||g(h.target)},f=h=>{a.forEach(l=>XF.trigger(l,"menu:reposition"))},g=h=>{c||(c=!0,a.forEach(l=>{let p=XF.DataStore.get(l,"menu-trigger"),n=p?p.target:null;l.contains(h)||n&&n.contains(h)||p&&p.close()}),c=!1)};return{onOpen:(h,l)=>{b||(b=XF.createElement("div",{className:"menuOutsideClicker"}),b.addEventListener("click",e),h.parentNode.insertBefore(b,h));a.length||(k.addEventListener("click",e),XF.on(m,"resize",f,{passive:!0}),l&&b.classList.add("is-active"));a.push(h)},onClose:h=>
{a=a.filter(l=>l!==h);a.length||(XF.off(k,"click",e),XF.off(m,"resize",f),b&&b.classList.remove("is-active"));g(h)},closeAll:()=>{c=!0;a.forEach(h=>XF.trigger(h,"menu:close"));c=!1},closeUnrelated:g,preventDocClick:()=>{d=!0},allowDocClick:()=>{d=!1}}})();XF.OffCanvasBuilder={navigation(a,b){k.body.append(a);const c=XF.createElementFromString('<ul class="offCanvasMenu-list" />');k.querySelectorAll(".js-offCanvasNavSource .p-navEl").forEach(d=>{let e=d.classList.contains("is-selected");var f=d.querySelector(".p-navEl-link");
let g=d.querySelector("[data-menu]");d.dataset.hasChildren&&!g&&(d=d.querySelector('[data-xf-click~="menu"]'),(d=XF.DataStore.get(d,"xf-click-handlers"))&&d.menu&&(g=d.menu.menu));if(f){d=XF.createElement("div",{className:"offCanvasMenu-linkHolder"});var h=k.createElement("li");f=f.cloneNode(!0);f.classList.remove(["p-navEl-link","p-navEl-link--menuTrigger","p-navEl-link--splitMenu"]);f.classList.add("offCanvasMenu-link");!f.matches("a")&&g&&(f.setAttribute("data-xf-click","menu-proxy"),f.setAttribute("data-trigger",
"< :up | .offCanvasMenu-link--splitToggle"));d.innerHTML="";d.append(f);e&&(h.classList.add("is-selected"),d.classList.add("is-selected"));h.append(d);if(g){f=XF.createElementFromString('<a class="offCanvasMenu-link offCanvasMenu-link--splitToggle" data-xf-click="toggle" data-target="< :up :next" role="button" tabindex="0" />');e&&f.classList.add("is-active");d.appendChild(f);const l=XF.createElementFromString('<ul class="offCanvasMenu-subList" />');e&&l.classList.add("is-active");g.querySelectorAll(".menu-linkRow").forEach(p=>
{XF.createElement("li",{innerHTML:p.cloneNode(!0).outerHTML.replace("menu-linkRow","offCanvasMenu-link")},l)});h.appendChild(l)}c.appendChild(h)}});a=a.querySelector(".js-offCanvasNavTarget").appendChild(c);XF.activate(a)},sideNav(a,b){const c=a.querySelector(".offCanvasMenu-content"),d=b.target;c&&!c.querySelector("[data-menu-close]")&&(b=c.querySelector(".block-header"),b||(b=XF.createElementFromString('<div class="offCanvasMenu-header offCanvasMenu-header--separated offCanvasMenu-shown" />'),b.innerHTML=
"",b.append(...d.childNodes),c.prepend(b)),b.append(XF.createElementFromString('<a class="offCanvasMenu-closer" data-menu-close="true" role="button" tabindex="0" />')));XF.on(m,"resize",()=>{"none"===m.getComputedStyle(d).display&&XF.trigger(a,"off-canvas:close")})},simple(a,b){k.body.append(a);const c=XF.createElementFromString('<ul class="offCanvasMenu-list" />'),d=a.dataset.ocmLinkRemoveClass;k.querySelectorAll(a.dataset.ocmLinkTarget).forEach(e=>{let f=XF.createElementFromString('<div class="offCanvasMenu-linkHolder" />');
e=e.cloneNode(!0);let g=XF.createElementFromString("<li />");e.classList.add("offCanvasMenu-link");d&&e.classList.remove(...d.split(" "));f.appendChild(e);g.appendChild(f);c.appendChild(g)});a=a.querySelector(".js-offCanvasTarget");a.appendChild(c);XF.activate(a)}};XF.ToggleStorageDataInstance=XF.create({storage:null,dataCache:{},syncTimers:{},pruneTimers:{},__construct(a){this.storage=a},getStorage(){return this.storage},get(a,b,c){c||(c={});let d=!0,e=!0;XF.hasOwn(c,"allowExpired")&&(d=c.allowExpired);
XF.hasOwn(c,"touch")&&(e=c.touch);this.dataCache[a]||(this.dataCache[a]=this.storage.getJson(a));c=this.dataCache[a];if(!XF.hasOwn(c,b))return null;c=c[b];const f=Math.floor(Date.now()/1E3);if(!d&&c[0]+c[1]<f)return delete this.dataCache[a][b],this.scheduleSync(a),null;e&&(c[0]=f,this.dataCache[a][b]=c,this.scheduleSync(a));return c[2]},set(a,b,c,d){this.dataCache[a]||(this.dataCache[a]={});d||(d=14400);const e=Math.floor(Date.now()/1E3);this.dataCache[a][b]=[e,d,c];this.scheduleSync(a)},remove(a,
b){this.dataCache[a]||(this.dataCache[a]={});delete this.dataCache[a][b];this.scheduleSync(a)},prune(a,b){const c=this.pruneTimers[a],d=()=>{clearTimeout(c);this.pruneTimers[a]=null;this.pruneInternal(a)};b?d():c||(this.pruneTimers[a]=setTimeout(d,100))},pruneInternal(a){this.dataCache[a]||(this.dataCache[a]=this.storage.getJson(a));const b=this.dataCache[a];let c;const d=Math.floor(Date.now()/1E3);let e=!1;for(let f of Object.keys(b))c=b[f],c[0]+c[1]<d&&(delete b[f],e=!0);e&&(this.dataCache[a]=b,
this.scheduleSync(a))},scheduleSync(a,b){const c=this.syncTimers[a],d=()=>{clearTimeout(c);this.syncTimers[a]=null;this.syncToStorage(a)};b?d():c||(this.syncTimers[a]=setTimeout(d,100))},syncToStorage(a){if(this.dataCache[a]){var b=this.dataCache[a];if(XF.isEmptyObject(b))this.storage.remove(a);else if(this.storage.supportsExpiryDate()){const c=XF.getFutureDate(1,"year");this.storage.setJson(a,b,c)}else this.storage.setJson(a,b)}}});XF.ToggleStorageData=(()=>{const a={local:new XF.ToggleStorageDataInstance(XF.LocalStorage),
cookie:new XF.ToggleStorageDataInstance(XF.Cookie)},b=a.local;return{getInstance(c){return a[c]},get(c,d,e){return b.get(c,d,e)},set(c,d,e,f){return b.set(c,d,e,f)},remove(c,d){return b.remove(c,d)},prune(c,d){return b.prune(c,d)}}})();XF.TooltipElement=XF.create({options:{baseClass:"tooltip",extraClass:"tooltip--basic",html:!1,inViewport:!0,loadRequired:!1,loadParams:null,placement:"top"},content:null,tooltip:null,shown:!1,shownFully:!1,placement:null,positioner:null,loadRequired:!1,loading:!1,contentApplied:!1,
setupCallbacks:null,__construct(a,b,c){this.setupCallbacks=[];this.options=XF.extendObject(!0,{},this.options,b);this.content=a;this.loadRequired=this.options.loadRequired;c&&this.setPositioner(c)},setPositioner(a){this.positioner=a},setLoadRequired(a){this.loadRequired=a},addSetupCallback(a){this.tooltip?a(this.tooltip):this.setupCallbacks.push(a)},show(){if(!this.shown)if(this.shown=!0,this.loadRequired)this.loadContent();else{var a=this.getTooltip();this.reposition();var b=XF.uniqueId(a);XF.on(m,
"resize.tooltip-"+b,this.reposition.bind(this));XF.trigger(a,"tooltip:shown");XF.display(a,"none");XF.Animate.fadeIn(a,{speed:XF.config.speed.fast,complete:()=>{this.shownFully=!0}})}},hide(){if(this.shown){this.shownFully=this.shown=!1;var a=this.tooltip;a&&(XF.Animate.fadeOut(a,{speed:XF.config.speed.fast}),XF.trigger(a,"tooltip:hidden"),a=XF.uniqueId(a),XF.off(m,"resize.tooltip-"+a))}},toggle(){this.shown?this.hide():this.show()},destroy(){this.tooltip&&this.tooltip.remove()},isShown(){return this.shown},
isShownFully(){return this.shown&&this.shownFully},requiresLoad(){return this.loadRequired},getPlacement(){return XF.rtlFlipKeyword(this.options.placement)},reposition(){var a=this.positioner;if(!a)console.error("No tooltip positioner");else if(!this.loadRequired){var b=this.options.inViewport;if(a instanceof Element){var c=XF.dimensions(a,!0);a.closest(".overlay")&&(b=!0)}else"undefined"!==typeof a[0]&&"undefined"!==typeof a[1]?c={top:a[1],right:a[0],bottom:a[1],left:a[0]}:"undefined"!==typeof a.right&&
"undefined"!==typeof a.bottom?c=a:console.error("Positioner is not in correct format",a);c.width=c.right-c.left;c.height=c.bottom-c.top;var d=k.documentElement;a=this.getTooltip();var e=this.getPlacement(),f=this.options.baseClass,g=e;if(b){b=d.clientWidth;var h=d.clientHeight;var l=d.scrollTop+XF.getStickyHeaderOffset(),p=d.scrollLeft;h={top:l,left:p,right:p+b,bottom:l+h,width:b,height:h}}else h=XF.dimensions(k.body);this.placement&&a.classList.remove(f+"--"+this.placement);a.classList.add(f+"--"+
e);a.style.visibility="hidden";XF.display(a);a.style.top="";a.style.bottom="";a.style.left="";a.style.right="";a.style.paddingLeft="";a.style.paddingRight="";a.style.paddingTop="";a.style.paddingBottom="";b=a.offsetWidth;l=a.offsetHeight;"top"==e&&c.top-l<h.top?e="bottom":"bottom"==e&&c.bottom+l>h.bottom?c.top-l>=h.top&&(e="top"):"left"==e&&c.left-b<h.left?e=c.right+b>h.right?c.top-l<h.top?"bottom":"top":"right":"right"==e&&c.right+b>h.right&&(e=c.left-b<h.left?c.top-l<h.top?"bottom":"top":"left");
e!=g&&(a.classList.remove(f+"--"+g),a.classList.add(f+"--"+e));g={top:"",right:"",bottom:"",left:""};switch(e){case "top":g.bottom=d.clientHeight-c.top;g.left=c.left+c.width/2-b/2;break;case "bottom":g.top=c.bottom;g.left=c.left+c.width/2-b/2;break;case "left":g.top=c.top+c.height/2-l/2;g.right=d.clientWidth-c.left;break;default:g.top=c.top+c.height/2-l/2,g.left=c.right}for(var n in g)a.style[n]=g[n]+"px";d=XF.dimensions(a,!0);n=c=0;f=a.querySelector("."+f+"-arrow");if("left"==e||"right"==e)d.top<
h.top?c=h.top-d.top:d.bottom>h.bottom&&(c=h.bottom-d.bottom),f.style.left="",f.style.top=50-100*c/d.top+"%";else{d.left<h.left?n=h.left-d.left:d.left+b>h.right&&(n=h.right-(d.left+b));d=parseInt(b/100*(50-100*n/b),0);p=d+parseInt(m.getComputedStyle(f).marginLeft);const q=p+f.offsetWidth;h=parseInt(a.style.paddingLeft,10);l=parseInt(a.style.paddingRight,10);p<h?(b=h-p,a.style.paddingLeft=Math.max(0,h-b),a.style.paddingRight=l+b):q>b-l&&(b=q-(b-l),a.style.paddingLeft=l+b,a.style.paddingRight=Math.max(0,
l-b));f.style.top="";f.style.left=d+"px"}n?a.style.left=parseInt(g.left)+n+"px":c&&(a.style.top=parseInt(g.top)+c+"px");this.placement=e;this.shown&&!this.loadRequired&&(a.style.visibility="")}},attach(){this.getTooltip()},getTooltip(){if(!this.tooltip){const a=this.getTemplate();k.body.append(a);this.tooltip=a;this.loadRequired||this.applyTooltipContent()}return this.tooltip},setContent(a){this.contentApplied=!1;this.content=a;this.applyTooltipContent()},applyTooltipContent(){if(this.contentApplied||
this.loadRequired)return!1;const a=this.getTooltip();var b=a.querySelector("."+this.options.baseClass+"-content");let c=this.content;XF.isFunction(c)&&(c=c());if(this.options.html){if(b.innerHTML="",c instanceof NodeList?b.append(...c):c instanceof Node?b.append(c):b.innerHTML=c,b=b.querySelector("img"))XF.on(b,"load",this.reposition.bind(this))}else b.textContent=c;b=this.setupCallbacks;for(const d of b)d(a);XF.activate(a);return this.contentApplied=!0},loadContent(){if(this.loadRequired&&!this.loading){var a=
this.content,b=c=>{this.content=c;this.loading=this.loadRequired=!1;this.applyTooltipContent();this.shown&&(this.shown=!1,this.show())};XF.isFunction(a)?(this.loading=!0,a(b,this.options.loadParams)):b("")}},getTemplate(){const a=this.options.baseClass;return XF.createElementFromString('<div class="'+a+(this.options.extraClass?" "+this.options.extraClass:"")+'" role="tooltip"><div class="'+a+'-arrow"></div><div class="'+a+'-content"></div></div>')}});XF.TooltipTrigger=XF.create({options:{delayIn:200,
delayInLoading:800,delayOut:200,trigger:"hover focus",maintain:!1,clickHide:null,onShow:null,onHide:null},target:null,tooltip:null,delayTimeout:null,delayTimeoutType:null,stopFocusBefore:null,clickTriggered:!1,touchEnterTime:null,covers:null,__construct(a,b,c){this.options=XF.extendObject(!0,{},this.options,c);this.target=a;this.tooltip=b;"auto"==this.options.trigger&&(this.options.trigger="hover focus"+(a.matches("span")?" touchclick":""));b.setPositioner(a);b.addSetupCallback(this.onTooltipSetup.bind(this));
a=XF.uniqueId(a);XF.TooltipTrigger.cache[a]=this},init(){let a=this.target,b=!1,c=!1;var d=XF.supportsPointerEvents();let e=d?"pointerover":"mouseover";d=d?"pointerout":"mouseout";null===this.options.clickHide&&(this.options.clickHide=a.matches("a"));const f=this.options.trigger.split(" ");for(const g of f)switch(g){case "hover":XF.on(a,e+".tooltip",this.mouseEnter.bind(this),{passive:!0});XF.on(a,d+".tooltip",this.leave.bind(this),{passive:!0});break;case "focus":XF.on(a,"focusin.tooltip",this.focusEnter.bind(this));
XF.on(a,"focusout.tooltip",this.leave.bind(this));break;case "click":b=!0;XF.onPointer(a,"click.tooltip",this.click.bind(this));XF.onPointer(a,"auxclick.tooltip contextmenu.tooltip",()=>{this.cancelShow();this.stopFocusBefore=Date.now()+2E3});break;case "touchclick":c=!0;XF.onPointer(a,"click.tooltip",n=>{XF.isEventTouchTriggered(n)&&this.click(n)});break;case "touchhold":c=!0;const h=this.options.delayIn;let l;const p=n=>{XF.DataStore.set(a,"tooltip:taphold",!0);XF.isEventTouchTriggered(n)&&this.click(n)};
XF.onPointer(a,{"touchstart.tooltip":n=>{XF.DataStore.set(a,"tooltip:touching",!0);l=setTimeout(()=>p(n),h)},"touchend.tooltip":()=>{clearTimeout(l);setTimeout(()=>{XF.DataStore.remove(a,"tooltip:touching")},50)},"touchmove.tooltip":()=>{clearTimeout(l)},"contextmenu.tooltip":n=>{XF.DataStore.get(a,"tooltip:touching")&&n.preventDefault()}},null,{passive:!0})}b&&c&&console.error("Cannot have touchclick and click triggers");if(!b&&this.options.clickHide)XF.onPointer(a,"click.tooltip auxclick.tooltip contextmenu.tooltip",
g=>{c&&XF.isEventTouchTriggered(g)||(this.hide(),this.stopFocusBefore=Date.now()+2E3)});XF.on(a,"tooltip:show",this.show.bind(this));XF.on(a,"tooltip:hide",this.hide.bind(this));XF.on(a,"tooltip:reposition",this.reposition.bind(this))},reposition(){this.tooltip.reposition()},click(a){0<a.button||a.ctrlKey||a.shiftKey||a.metaKey||a.altKey?this.cancelShow():this.tooltip.isShown()?this.tooltip.isShownFully()?this.hide():(a.preventDefault(),this.clickShow(a)):(a.preventDefault(),this.clickShow(a))},clickShow(a){this.clickTriggered=
!0;setTimeout(()=>{var b=this.addCovers();XF.isEventTouchTriggered(a)?Array.from(b).forEach(c=>{c.classList.add("is-active")}):(b=XF.uniqueId(this.target),XF.on(k,"click.tooltip-"+b,this.docClick.bind(this)))},0);this.show()},addCovers(){this.covers&&this.covers.forEach(d=>d.remove());var a=XF.dimensions(this.target,!0),b=[];b.push({top:0,height:a.top,left:0,right:0});b.push({top:a.top,height:a.height,left:0,width:a.left});b.push({top:a.top,height:a.height,left:a.right,right:0});b.push({top:a.bottom,
height:k.documentElement.scrollHeight-a.bottom,left:0,right:0});a=[];for(const d of b){b=XF.createElement("div",{className:"tooltipCover"});for(let e in d)b.style[e]=d[e]+"px",XF.on(b,"click",this.hide.bind(this));a.push(b)}const c=this.tooltip.getTooltip();a.forEach(d=>c.insertAdjacentElement("beforebegin",d));this.covers=a;XF.setRelativeZIndex(a,this.target);return a},docClick(a){let b=this.covers;var c=a.pageX;let d=a.pageY;b&&(0==a.screenX&&0==a.screenY&&(a=a.target.getBoundingClientRect(),c=
a.left,d=a.top),b.forEach(e=>e.classList.add("is-active")),c=k.elementFromPoint(c-m.scrollX,d-m.scrollY),b.forEach(e=>e.classList.remove("is-active")),b.includes(c)&&this.hide())},mouseEnter(a){XF.isEventTouchTriggered(a)?this.touchEnterTime=a.timeStamp:XF.browser.ios&&XF.supportsPointerEvents()&&a instanceof PointerEvent&&this.touchEnterTime&&this.touchEnterTime>a.timeStamp-1E3||this.enter()},focusEnter(a){100>Date.now()-XF.pageDisplayTime||XF.isEventTouchTriggered(a)||(!this.stopFocusBefore||Date.now()>=
this.stopFocusBefore)&&this.enter()},enter(){if(!this.isShown()||!this.clickTriggered){this.clickTriggered=!1;var a=this.tooltip.requiresLoad()?this.options.delayInLoading:this.options.delayIn;a?("enter"!==this.delayTimeoutType&&this.resetDelayTimer(),this.delayTimeoutType||this.isShown()||(this.delayTimeoutType="enter",this.delayTimeout=setTimeout(()=>{this.delayTimeoutType=null;this.show()},a))):this.show()}},leave(){if(!this.clickTriggered){var a=this.options.delayOut;a?("leave"!==this.delayTimeoutType&&
this.resetDelayTimer(),!this.delayTimeoutType&&this.isShown()&&(this.delayTimeoutType="leave",this.delayTimeout=setTimeout(()=>{this.delayTimeoutType=null;this.hide()},a))):this.hide()}},show(){var a=XF.uniqueId(this.target);XF.off(m,"focus.tooltip-"+a);XF.on(m,"focus.tooltip-"+a,b=>{this.stopFocusBefore=Date.now()+250});XF.setRelativeZIndex(this.tooltip.getTooltip(),this.target);this.options.onShow&&(a=this.options.onShow,a(this,this.tooltip));this.tooltip.show()},cancelShow(){"enter"===this.delayTimeoutType?
this.resetDelayTimer():this.tooltip.isShownFully()||this.hide()},hide(){this.tooltip.hide();this.resetDelayTimer();this.clickTriggered=!1;this.covers&&(this.covers.forEach(b=>b.remove()),this.covers=null);var a=XF.uniqueId(this.target);XF.off(k,"click.tooltip-"+a);this.options.onHide&&(a=this.options.onHide,a(this,this.tooltip))},toggle(){this.isShown()?this.hide():this.show()},isShown(){return this.tooltip.isShown()},wasClickTriggered(){return this.clickTriggered},resetDelayTimer(){this.delayTimeoutType&&
(clearTimeout(this.delayTimeout),this.delayTimeoutType=null)},addMaintainElement(a){if(!XF.DataStore.get(a,"tooltip-maintain")){var b=this.options.trigger.split(" ");for(const c of b)switch(c){case "hover":XF.on(a,"mouseover.tooltip",this.enter.bind(this));XF.on(a,"mouseout.tooltip",this.leave.bind(this));break;case "focus":XF.on(a,"focusin.tooltip",this.enter.bind(this)),XF.on(a,"focusout.tooltip",this.leave.bind(this))}XF.DataStore.set(a,"tooltip-maintain",!0)}},removeMaintainElement(a){XF.off(a,
".tooltip");XF.DataStore.set(a,"tooltip-maintain",!1)},onTooltipSetup(a){this.options.maintain&&(this.addMaintainElement(a),XF.on(a,"menu:opened",b=>{this.addMaintainElement(b.menu)}),XF.on(a,"menu:closed",b=>{this.removeMaintainElement(b.menu)}))}});XF.TooltipTrigger.cache={};XF.TooltipOptions={base:{baseClass:"tooltip",extraClass:"tooltip--basic",html:!1,inViewport:!0,placement:"top",clickHide:null,delayIn:200,delayOut:200,maintain:!1,trigger:"hover focus"},tooltip:["baseClass","extraClass","html",
"placement"],trigger:["clickHide","delayIn","delayOut","maintain","trigger"],extract(a,b){const c={};for(const d of a)c[d]=b[d];return c},extractTooltip(a){return this.extract(this.tooltip,a)},extractTrigger(a){return this.extract(this.trigger,a)}};XF.AutoComplete=XF.Element.newHandler({loadTimer:null,loadVal:"",results:null,options:{single:!1,multiple:",",acurl:"",minLength:2,queryKey:"q",extraFields:"",extraParams:{},jsonContainer:"results",autosubmit:!1},abortController:null,init(){const a=this.target;
this.options.autosubmit&&(this.options.single=!0);this.options.acurl||(this.options.acurl=XF.getAutoCompleteUrl());this.results=new XF.AutoCompleteResults({onInsert:this.addValue.bind(this)});a.setAttribute("autocomplete","off");XF.on(a,"keydown",this.keydown.bind(this));XF.on(a,"keyup",this.keyup.bind(this));XF.on(a,"blur",this.blur.bind(this));XF.on(a,"click",this.blur.bind(this));XF.on(a,"paste",()=>setTimeout(()=>{XF.trigger(a,"keydown")},0));const b=a.closest("form");XF.on(b,"submit",this.hideResults.bind(this))},
keydown(a){if(this.results.isVisible()){var b=this.results;switch(a.key){case "ArrowDown":b.selectResult(1);a.preventDefault();a.stopPropagation();break;case "ArrowUp":b.selectResult(-1);a.preventDefault();a.stopPropagation();break;case "Escape":b.hideResults();a.preventDefault();a.stopPropagation();break;case "Enter":b.insertSelectedResult(a),a.preventDefault(),a.stopPropagation()}}},keyup(a){if(this.results.isVisible())switch(a.key){case "ArrowDown":case "ArrowUp":case "Enter":return}this.loadTimer&&
clearTimeout(this.loadTimer);this.loadTimer=setTimeout(this.load.bind(this),200)},blur(a){clearTimeout(this.loadTimer);setTimeout(this.hideResults.bind(this),250);this.abortController&&(this.abortController.abort(),this.abortController=null)},load(){var a=this.loadVal;const b=this.options.extraParams;this.loadTimer&&clearTimeout(this.loadTimer);this.loadVal=this.getPartialValue();""==this.loadVal?this.hideResults():this.loadVal==a||this.loadVal.length<this.options.minLength||(b[this.options.queryKey]=
this.loadVal,""!=this.options.extraFields&&k.querySelectorAll(this.options.extraFields).forEach(c=>{b[c.name]=c.value}),this.abortController&&(this.abortController.abort(),this.abortController=null),{abortController:a}=XF.ajaxAbortable("get",this.options.acurl,b,this.showResults.bind(this),{error:!1}),a&&(this.abortController=a))},hideResults(){this.results.hideResults()},showResults(a){this.abortController&&(this.abortController=null);this.options.jsonContainer&&a&&(a=a[this.options.jsonContainer]);
this.results.showResults(this.getPartialValue(),a,this.target)},addValue(a){if(this.options.single)this.target.value=a;else{const b=this.getFullValues();""!=a&&(b.length&&(a=" "+a),b.push(a+this.options.multiple+" "));this.target.value=b.join(this.options.multiple)}XF.trigger(this.target,"change");XF.trigger(this.target,XF.customEvent("auto-complete:insert",{inserted:a.trim(),current:this.target.value}));this.options.autosubmit?(a=this.target.closest("form"),XF.trigger(a,"submit")&&a.submit()):XF.autofocus(this.target)},
getFullValues(){let a=this.target.value,b;if(""==a)return[];if(this.options.single)return[a];b=a.lastIndexOf(this.options.multiple);if(-1==b)return[];a=a.substring(0,b);return a.split(this.options.multiple)},getPartialValue(){const a=this.target.value;let b;if(this.options.single)return a.trim();b=a.lastIndexOf(this.options.multiple);return-1==b?a.trim():a.substring(b+this.options.multiple.length).trim()}});XF.HScroller=XF.Element.newHandler({options:{scrollerClass:"hScroller-scroll",actionClass:"hScroller-action",
autoScroll:".tabs-tab.is-active"},scrollTarget:null,goStart:null,goEnd:null,init(){const a=this.target.querySelector("."+this.options.scrollerClass);if(a){this.scrollTarget=a;var b,c;XF.on(a,"mousedown.horizontalScroller",g=>{g.button||(b=g.clientX,c=!1,g.preventDefault(),XF.isEventTouchTriggered(g)&&(g=k.activeElement,g.matches("input, textarea, select, button")&&g.blur()),XF.on(m,"mouseup.horizontalScroller",h=>{XF.off(m,".horizontalScroller");c&&h.preventDefault()}),XF.on(m,"mousemove.horizontalScroller",
h=>{const l=b-h.clientX;0!=l&&(this.move(l)&&(c=!0),b=h.clientX)}))});XF.on(a,"click.horizontalScroller",g=>{c&&(g.preventDefault(),g.stopImmediatePropagation(),c=!1)});XF.on(a,"scroll.horizontalScroller",this.updateScroll.bind(this),{passive:!0});XF.on(a,"tab:click.horizontalScroller",g=>{c&&g.preventDefault()});var d=XF.measureScrollBar(null,"height");a.classList.add("is-calculated");0!=d&&(a.style.marginBottom=parseInt(m.getComputedStyle(a).marginBottom,10)-d+"px");d=this.options.actionClass;var e=
XF.createElementFromString('<i class="'+d+" "+d+'--start" aria-hidden="true" />');XF.on(e,"click",()=>this.step(-1));a.insertAdjacentElement("afterend",e);this.goStart=e;d=XF.createElementFromString('<i class="'+d+" "+d+'--end" aria-hidden="true" />');XF.on(d,"click",()=>this.step(1));a.insertAdjacentElement("afterend",d);this.goEnd=d;this.updateScroll();XF.on(k.body,"xf:layout",this.updateScroll.bind(this));var f;XF.on(m,"resize",()=>{f&&clearTimeout(f);f=setTimeout(this.updateScroll.bind(this),
100)});if(e=a.querySelector(this.options.autoScroll))d=this.target.clientWidth,e=XF.dimensions(e),XF.isRtl()?80>e.left&&XF.normalizedScrollLeft(a,-e.right+d-50):e.right>d&&(e.right+80>d?XF.normalizedScrollLeft(a,e.left-50):XF.normalizedScrollLeft(a,e.left-80))}else console.error("no scroll target")},scrollToStart(){this.scrollTo(0)},scrollToEnd(){this.scrollTo(this.scrollTarget.scrollWidth)},scrollTo(a){const b=this.scrollTarget,c=b.scrollLeft,d="number"===typeof a?a-c:Number(a.replace("+=",""));
let e=null;const f=g=>{e||(e=g);g-=e;b.scrollLeft=c+d*g/150;150>g&&m.requestAnimationFrame(f)};m.requestAnimationFrame(f)},move(a){const b=this.scrollTarget,c=XF.normalizedScrollLeft(b);XF.isRtl()&&(a*=-1);XF.normalizedScrollLeft(b,c+a);return XF.normalizedScrollLeft(b)!==c},step(a){const b=Math.max(125,Math.floor(.25*this.scrollTarget.clientWidth));let c="+=";switch(XF.scrollLeftType()){case "inverted":case "negative":c="-="}this.scrollTo(c+a*b)},updateScroll(){var a=this.scrollTarget;const b=XF.normalizedScrollLeft(a);
a=a.offsetWidth+b+1<a.scrollWidth;this.goStart.classList[0<b?"add":"remove"]("is-active");this.goEnd.classList[a?"add":"remove"]("is-active")}});XF.IconRenderer=XF.Element.newHandler({options:{inline:!0,lazy:!0},icon:null,data:null,observer:null,init(){"I"!==this.target.nodeName?console.error("Icon renderer must be applied to an <i> element: %o",this.target):(this.target.classList.add("fa--xf"),this.target.innerHTML="<svg></svg>",this.options.lazy?this.setupObserver():this.showIcon())},setupObserver(){this.observer=
new IntersectionObserver(a=>{[a]=a;a.isIntersecting?this.showIcon():this.hideIcon()},{rootMargin:"100px"});this.observer.observe(this.target)},async showIcon(){const a=await this.getIcon();this.target.innerHTML=a.innerHTML},hideIcon(){this.target.innerHTML="<svg></svg>"},async getIcon(){if(null!==this.icon)return this.icon;var a=this.getData();a=this.options.inline?await XF.Icon.getInlineIcon(a.variant,a.name,a.classes,a.title):XF.Icon.getIcon(a.variant,a.name,a.classes,a.title);return this.icon=
XF.createElementFromString(a)},getData(){if(null!==this.data)return this.data;let a="",b="";for(var c of this.target.classList.values()){if(a&&b)break;c.match(XF.Icon.ICON_CLASS_BLOCKLIST_REGEX)||(["fal","far","fas","fad","fab"].includes(c)?a=XF.Icon.normalizeIconVariant(c):c.match(XF.Icon.ICON_CLASS_REGEX)&&(b=XF.Icon.normalizeIconName(c)))}a||(a="default");if(!b)throw Error("No valid icon name class was found");c=this.target.className;const d=this.target.title;this.target.removeAttribute("title");
return this.data={variant:a,name:b,classes:c,title:d}}});XF.InstallPrompt=XF.Element.newHandler({options:{button:"| .js-installPromptButton",installTemplateIOS:"| .js-installTemplateIOS"},button:null,installTemplate:null,bipEvent:null,isIOS:!1,init(){(this.button=XF.findRelativeIf(this.options.button,this.target))?(XF.on(m,"beforeinstallprompt",this.beforeInstallPrompt.bind(this)),XF.on(m,"appinstalled",this.appInstalled.bind(this)),XF.isIOS()&&!XF.Feature.has("displaymodestandalone")&&this.initIOS(),
XF.on(this.button,"click",this.buttonClick.bind(this))):console.error("No install button found for %o",this.target)},initIOS(){this.isIOS=!0;XF.display(this.target)},beforeInstallPrompt(a){a.preventDefault();this.bipEvent=a;XF.display(this.target)},appInstalled(a){XF.display(this.target,"none")},buttonClick(){if(this.isIOS){var a=XF.findRelativeIf(this.options.installTemplateIOS,this.target);a&&(a=a.content.cloneNode(!0).querySelector(".js-installTemplateContent"),XF.overlayMessage(null,a))}else this.bipEvent?
this.bipEvent.prompt():console.error("No beforeinstallprompt event was captured")}});XF.NumberBox=XF.Element.newHandler({options:{textInput:".js-numberBoxTextInput",buttonSmaller:!1,step:null},textInput:null,holdTimeout:null,holdInterval:null,init(){var a=this.target;const b=a.querySelector(this.options.textInput);if(b){this.textInput=b;a.classList.add("inputGroup--joined");var c=a.querySelector(".js-up");a=a.querySelector(".js-down");c||(c=this.createButton("up"));a||(a=this.createButton("down"));
this.setupButton(c,b);this.setupButton(a,c)}else console.error("Cannot initialize, no text input.")},createButton(a){a=XF.createElement("button",{type:"button",tabIndex:-1,title:XF.phrases["number_button_"+a]||a,ariaLabel:XF.phrases["number_button_"+a]||a,dataset:{dir:a},className:`inputGroup-text inputNumber-button inputNumber-button--${a} js-${a}`});this.textInput.disabled&&(a.classList.add("is-disabled"),a.disabled=!0);this.options.buttonSmaller&&a.classList.add("inputNumber-button--smaller");
return a},setupButton(a,b){XF.on(a,"focus",this.buttonFocus.bind(this));XF.on(a,"click",this.buttonClick.bind(this));XF.on(a,"mousedown",this.buttonMouseDown.bind(this));XF.on(a,"touchstart",this.buttonMouseDown.bind(this),{passive:!0});XF.on(a,"mouseleave",this.buttonMouseUp.bind(this));XF.on(a,"mouseup",this.buttonMouseUp.bind(this));XF.on(a,"touchend",this.buttonMouseUp.bind(this),{passive:!0});XF.on(a,"touchend",c=>{c.preventDefault();a.click()});b.insertAdjacentElement("afterend",a)},buttonFocus(a){a.preventDefault();
a.stopPropagation()},buttonClick(a){this.step(a.target.dataset.dir)},step(a){const b=this.textInput;a="step"+a.charAt(0).toUpperCase()+a.slice(1);b.readonly||(""===b.value&&(b.value=b.getAttribute("min")||0),b[a](),XF.trigger(b,"change"),XF.trigger(b,"input"))},buttonMouseDown(a){this.buttonMouseUp(a);this.holdTimeout=setTimeout(()=>{this.holdInterval=setInterval(()=>{this.step(a.target.dataset.dir)},75)},500)},buttonMouseUp(a){clearTimeout(this.holdTimeout);clearInterval(this.holdInterval)}});XF.PageJump=
XF.Element.newHandler({options:{pageUrl:null,pageInput:"| .js-pageJumpPage",pageSubmit:"| .js-pageJumpGo",sentinel:"%page%"},input:null,init(){if(this.options.pageUrl)if(this.input=XF.findRelativeIf(this.options.pageInput,this.target)){XF.on(this.input,"keyup",b=>{"Enter"===b.key&&(b.preventDefault(),this.go())});var a=XF.findRelativeIf(this.options.pageSubmit,this.target);XF.on(a,"click",b=>{b.preventDefault();this.go()});a=this.target.closest(".menu");XF.on(a,"menu:opened",()=>this.shown())}else console.error("No input provided to page jump");
else console.error("No page-url provided to page jump")},shown(){this.input.select()},go(){let a=parseInt(this.input.value,10);if(isNaN(a)||1>a)a=1;const b=this.options.pageUrl,c=this.options.sentinel;let d=b.replace(c,a);d===b&&(d=b.replace(encodeURIComponent(c),a));XF.redirect(d)}});XF.QuickSearch=XF.Element.newHandler({options:{select:"| .js-quickSearch-constraint"},select:null,init(){if(this.select=XF.findRelativeIf(this.options.select,this.target))XF.on(this.select,"change",this.updateSelectWidth.bind(this)),
this.updateSelectWidth()},updateSelectWidth(){let a=XF.createElement("span",{className:`${this.select.className} input--select`});var b=this.select.querySelector("option:checked");b||(b=this.select.querySelector("option"));a.textContent=b.textContent;XF.display(a,"inline");b=XF.createElement("div",{style:{position:"absolute",top:"-200px",visibility:"hidden"}},k.body);b.style[XF.isRtl()?"right":"left"]="-9999px";b.appendChild(a);this.select.style.width=`${a.offsetWidth+8}px`;this.select.style.flexGrow=
0;this.select.style.flexShrink=0;k.body.removeChild(b)}});XF.SearchAutoComplete=XF.extend(XF.AutoComplete,{__backup:{init:"_init",keydown:"_keydown",load:"_load"},form:null,init(){if(this.options.acurl){var a=this.target.closest("form");a?(this.form=a,this.results=new XF.SearchAutoCompleteResults({showDescriptions:this.options.showDescriptions}),this.target.setAttribute("autocomplete","off"),XF.on(this.target,"keydown",this.keydown.bind(this)),XF.on(this.target,"keyup",this.keyup.bind(this)),XF.on(this.target,
"input",()=>setTimeout(()=>{XF.trigger(this.target,"keyup")},0))):console.error("No form was found: %o",this.target)}else console.error("No auto-complete URL was provided: %o",this.target)},keydown(a){"Enter"===a.key&&this.results.isVisible()&&0>this.results.selectedResult||this._keydown(a)},load(){this.loadTimer&&clearTimeout(this.loadTimer);var a=this.getPartialValue();a!==this.loadVal&&(this.loadVal=a,""===a?this.hideResults():this.loadVal.length<this.options.minLength||(this.abortController&&
(this.abortController.abort(),this.abortController=null),{abortController:a}=XF.ajaxAbortable("POST",this.options.acurl,this.form,this.showResults.bind(this),{skipDefault:!0,skipError:!0,global:!1}),a&&(this.abortController=a)))}});XF.SearchAutoCompleteResults=XF.extend(XF.AutoCompleteResults,{__backup:{__construct:"___construct",createResultItem:"_createResultItem",getResultItemParams:"_getResultItemParams"},__construct(a){a=XF.extendObject({onInsert:this.openResult.bind(this),displayTemplate:this.getDisplayTemplate(),
wrapperClasses:"autoCompleteList--fullWidth"},a);this.___construct(a)},createResultItem(a,b){a=this._createResultItem(a,b);XF.on(a,"auxclick",c=>{c.preventDefault();this.resultClick(c)});return a},getResultItemParams(a,b){a=this._getResultItemParams(a,b);a.desc=a.descPlain;return a},highlightResultText(a,b){b=XF.regexQuote(XF.htmlspecialchars(b)).split(/\s+/).join("|");return a.replace(new RegExp(`\\b(${b})`,"gi"),c=>`<strong>${c}</strong>`)},prepareResults(a){this.results.connected||(a.closest(".menu-row, li").append(this.results),
this.selectResult(-1,!0))},getDisplayTemplate(){return'<div class="contentRow contentRow--alignMiddle" title="{{{textPlain}}}">\n\t\t\t\t\t\t{{#icon}}<div class="contentRow-figure">{{{icon}}}</div>{{/icon}}\n\t\t\t\t\t\t<div class="contentRow-main contentRow-main--close u-singleLine">\n\t\t\t\t\t\t\t<a href="{{{url}}}">{{{text}}}</a>\n\t\t\t\t\t\t\t<div class="contentRow-minor contentRow-minor--smaller">\n\t\t\t\t\t\t\t\t<ul class="listInline listInline--bullet u-singleLine">\n\t\t\t\t\t\t\t\t\t<li>{{{type}}}</li>\n\t\t\t\t\t\t\t\t\t{{#desc}}<li>{{{desc}}}</li>{{/desc}}\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>'},
openResult(a,b,c){a=b.querySelector("a").getAttribute("href");if(!a)return!1;if(c instanceof PointerEvent){if((0===c.button&&XF.isMac()?c.metaKey:c.ctrlKey)||1===c.button)return m.open(a,"_blank"),!1;if(0!==c.button)return!1}XF.redirect(a);return!1}});XF.ShareButtons=XF.Element.newHandler({options:{buttons:".shareButtons-button",iconic:".shareButtons--iconic",pageUrl:null,pageTitle:null,pageDesc:null,pageImage:null},pageUrl:null,pageTitle:null,pageDesc:null,pageImage:null,init(){const a=this.options.buttons,
b=this.target.matches(this.options.iconic);XF.onDelegated(this.target,"focus",a,this.focus.bind(this));XF.onDelegated(this.target,"mouseover",a,this.focus.bind(this));XF.onDelegated(this.target,"click",a,this.click.bind(this));Array.from(this.target.querySelectorAll(a)).forEach(c=>{b&&XF.Element.applyHandler(c,"element-tooltip",{element:"> span"});c.dataset.clipboard&&navigator.clipboard&&c.classList.remove("is-hidden")})},setupPageData(){if(this.options.pageTitle&&this.options.pageTitle.length)this.pageTitle=
this.options.pageTitle;else{var a;this.pageTitle=null==(a=k.querySelector('meta[property="og:title"]'))?void 0:a.content;if(!this.pageTitle){let b;this.pageTitle=null==(b=k.querySelector("title"))?void 0:b.textContent}}if(this.options.pageUrl&&this.options.pageUrl.length)this.pageUrl=this.options.pageUrl;else{if(a=this.target.closest(".overlay"))this.pageUrl=a.dataset.url;if(!this.pageUrl){let b;this.pageUrl=null==(b=k.querySelector('meta[property="og:url"]'))?void 0:b.content}this.pageUrl||(this.pageUrl=
m.location.href)}if(this.options.pageDesc&&this.options.pageDesc.length)this.pageDesc=this.options.pageDesc;else{let b;this.pageDesc=null==(b=k.querySelector('meta[property="og:description"]'))?void 0:b.content;if(!this.pageDesc){let c;this.pageDesc=(null==(c=k.querySelector("meta[name=description]"))?void 0:c.content)||""}}if(this.options.pageImage&&this.options.pageImage.length)this.pageImage=this.options.pageImage;else{let b;this.pageImage=null==(b=k.querySelector('meta[property="og:image"]'))?
void 0:b.content;this.pageImage||(this.pageImage=XF.config.publicMetadataLogoUrl||"")}},focus(a){const b=a.target.closest(this.options.buttons);if(!b.dataset.initialized&&!b.matches(".shareButtons-button--share")){this.pageUrl||this.setupPageData();var c=b.dataset.href;if(!c){if(b.dataset.clipboard)return;console.error("No data-href or data-clipboard on share button %o",a.currentTarget)}c=c.replace("{url}",encodeURIComponent(this.pageUrl)).replace("{title}",encodeURIComponent(this.pageTitle)).replace("{desc}",
encodeURIComponent(this.pageDesc)).replace("{image}",encodeURIComponent(this.pageImage));b.setAttribute("href",c);b.dataset.initialized=!0}},click(a){const b=a.target.closest(this.options.buttons),c=b.getAttribute("href"),d=b.dataset.popupWidth||600,e=b.dataset.popupHeight||400;b.matches(".shareButtons-button--share")||a.altKey||a.ctrlKey||a.metaKey||a.shiftKey||(b.dataset.clipboard?(a.preventDefault(),a=b.dataset.clipboard.replace("{url}",this.pageUrl).replace("{title}",this.pageTitle).replace("{desc}",
this.pageDesc).replace("{image}",this.pageImage),navigator.clipboard.writeText(a).then(()=>XF.flashMessage(XF.phrase("link_copied_to_clipboard"),3E3))):c&&c.match(/^https?:/i)&&(a.preventDefault(),m.open(c,"share","toolbar=no,location=no,status=no,menubar=no,scrollbars=yes,resizable=yes,width="+d+",height="+e+",left="+(screen.width-d)/2+",top="+(screen.height-e)/2)))}});XF.Sticky=XF.Element.newHandler({options:{stickyClass:"is-sticky",stickyDisabledClass:"is-sticky-disabled",minWindowHeight:0,setCss:!0,
offsetTop:null},active:null,offsetTop:null,init(){this.offsetTop=null===this.options.offsetTop?parseInt(this.target.style.top||0,10):this.options.offsetTop;0===this.options.minWindowHeight?this.enable():(this.update(),XF.on(m,"resize.sticky-header",this.update.bind(this)))},update(){const a=k.documentElement.clientHeight<this.options.minWindowHeight;this.active&&a?this.disable():this.active||a||this.enable()},enable(){this.active=!0;this.target.classList.remove(this.options.stickyDisabledClass);this.options.setCss&&
(this.target.style.position="sticky",this.target.style.top=this.offsetTop+"px");this.checkIsSticky();XF.on(m,"scroll.sticky-header",this.checkIsSticky.bind(this),{passive:!0})},disable(){this.active=!1;this.target.classList.add(this.options.stickyDisabledClass);this.target.classList.remove(this.options.stickyClass);this.options.setCss&&(this.target.style.position="static",this.target.style.top="auto");XF.off(m,"scroll.sticky-header")},checkIsSticky(){const a=Math.floor(this.target.getBoundingClientRect().top),
b=this.offsetTop;a<b||a===b&&0<m.scrollY?this.target.classList.add(this.options.stickyClass):this.target.classList.remove(this.options.stickyClass);XF.layoutChange()}});XF.StickyHeader=XF.extend(XF.Sticky,{__backup:{init:"_init"},options:XF.extendObject({},XF.Sticky.prototype.options,{minWindowHeight:251,setCss:!1}),init(){this._init();XF.StickyHeader.cache.push(this)}});XF.StickyHeader.cache=[];XF.StyleVariationInput=XF.Element.newHandler({options:{variationContainer:"< form | .js-variationContainer",
variationInput:'[name="user[style_variation]"]'},variationContainer:null,init(){const a=XF.findRelativeIf(this.options.variationContainer,this.target);a?(this.variationContainer=a,XF.on(this.target,"change",this.change.bind(this))):console.error("No variation container found for %o",this.target)},change(){const a=this.variationContainer.querySelector(this.options.variationInput);XF.ajax("POST",XF.canonicalizeUrl("index.php?misc/style-variation-input"),{style_id:this.target.value,style_variation:a.value},
this.handleResponse.bind(this))},handleResponse(a){XF.setupHtmlInsert(a.html,b=>{b instanceof HTMLInputElement?XF.Animate.fadeUp(this.variationContainer,{complete:()=>{this.variationContainer.innerHTML="";this.variationContainer.appendChild(b)}}):(this.variationContainer.innerHTML="",this.variationContainer.appendChild(b),XF.Animate.fadeDown(this.variationContainer))})}});XF.Tooltip=XF.Element.newHandler({options:XF.extendObject(!0,{},XF.TooltipOptions.base,{content:null}),trigger:null,tooltip:null,
init(){const a=this.getContent(),b=XF.TooltipOptions.extractTooltip(this.options),c=XF.TooltipOptions.extractTrigger(this.options);this.tooltip=new XF.TooltipElement(a,b);this.trigger=new XF.TooltipTrigger(this.target,this.tooltip,c);this.trigger.init();XF.on(this.target,"tooltip:refresh",this.refresh.bind(this))},getContent(){if(this.options.content)return this.options.content;if(this.target instanceof SVGElement){var a=this.target.querySelector("title"),b;let d;var c=null!=(d=null!=(b=this.target.getAttribute("data-original-title"))?
b:null==a?void 0:a.textContent)?d:"";this.target.setAttribute("data-original-title",c);null==a||a.remove();return c}b=null!=(c=null!=(a=this.target.getAttribute("data-original-title"))?a:this.target.getAttribute("title"))?c:"";this.target.setAttribute("data-original-title",b);this.target.removeAttribute("title");0===this.target.children.length&&this.target.setAttribute("aria-label",b);return b},refresh(){this.tooltip.setContent(this.getContent())}});XF.ElementTooltip=XF.extend(XF.Tooltip,{__backup:{getContent:"_getContent",
init:"_init"},options:XF.extendObject({},XF.Tooltip.prototype.options,{element:null,showError:!0,noTouch:!0,shortcut:null}),element:null,init(){this.options.shortcut&&this.setupShortcut(this.options.shortcut);if(!this.options.noTouch||!XF.Feature.has("touchevents")){var a=this.options.element,b=this.options.showError;if(a){var c=XF.findRelativeIf(a,this.target);c instanceof NodeList&&(c=c[0]);c?(this.element=c,this.target.removeAttribute("title"),this.options.html=!0,this._init()):b&&console.error("Element tooltip could not find "+
a)}else b&&console.error("No element specified for the element tooltip")}},setupShortcut(a){"node-description"==a&&(this.options.element||(this.options.element="< .js-nodeMain | .js-nodeDescTooltip"),this.options.showError=!1,this.options.maintain=!0,this.options.placement="right",this.options.extraClass="tooltip--basic tooltip--description")},getContent(){return this.element.childNodes}});XF.MemberTooltipCache={};XF.MemberTooltip=XF.Element.newHandler({options:{delay:600},trigger:null,tooltip:null,
userId:null,init(){this.userId=this.target.dataset.userId;this.tooltip=new XF.TooltipElement(this.getContent.bind(this),{extraClass:"tooltip--member",html:!0,loadRequired:!0});this.trigger=new XF.TooltipTrigger(this.target,this.tooltip,{maintain:!0,delayInLoading:this.options.delay,delayIn:this.options.delay,trigger:"hover focus click",onShow:this.onShow.bind(this),onHide:this.onHide.bind(this)});this.trigger.init()},getContent(a){var b=XF.MemberTooltipCache[this.userId];b?(XF.createElementFromString(b.trim()),
a(b)):(b={skipDefault:!0,skipError:!0,global:!1},this.trigger.wasClickTriggered()&&(b.global=!0),XF.ajax("get",this.target.getAttribute("href"),{tooltip:!0},c=>this.loaded(c,a),b))},loaded(a,b){if(a.html){var c=this.userId;XF.setupHtmlInsert(a.html,(d,e,f)=>{XF.MemberTooltipCache[c]=a.html.content;b(a.html.content)})}},onShow(){const a=XF.MemberTooltip.activeTooltip;a&&a!==this&&a.hide();XF.MemberTooltip.activeTooltip=this},onHide(){XF.MemberTooltip.activeTooltip===this&&(XF.MemberTooltip.activeTooltip=
null)},show(){this.trigger.show()},hide(){this.trigger.hide()}});XF.MemberTooltip.activeTooltip=null;XF.Notices=XF.Element.newHandler({options:{type:"block",target:".js-notice",scrollInterval:5},notices:null,slider:null,dismissing:!1,init(){this.updateNoticeList();this.filter();this.handleNoticeListChange()&&(XF.onDelegated(this.target,"click",".js-noticeDismiss",this.dismiss.bind(this)),this.start())},updateNoticeList(){this.notices=this.target.querySelectorAll(`${this.options.target}`);"scrolling"===
this.options.type&&(this.target.style.overflow="hidden",this.notices.forEach(a=>a.classList.add("f-carousel__slide")));return this.notices},handleNoticeListChange(){const a=this.notices.length;a?1===a&&this.target.classList.remove("notices--isMulti"):(this.slider&&(this.slider.destroy(),this.slider=null),this.target.remove());return a},filter(){const a=this.getCookies();let b=!1;this.notices.forEach(c=>{const d=parseInt(c.dataset.noticeId,10),e=c.dataset.visibility;a&&d&&a.includes(d)&&(c.remove(),
b=!0);e&&("hidden"===m.getComputedStyle(c).visibility?(c.remove(),b=!0):c.classList.add("is-vis-processed"))});b&&this.updateNoticeList()},start(){const a=this.notices,b=this.options.type;"floating"===b?a.forEach(c=>{const d=parseInt(c.dataset.displayDuration,10),e=parseInt(c.dataset.delayDuration,10),f=c.dataset.autoDismiss;e?setTimeout(()=>{this.displayFloating(c,XF.config.speed.normal,d,f)},e):this.displayFloating(c,XF.config.speed.fast,d,f)}):"scrolling"===b&&1<this.notices.length&&(this.slider=
new Carousel(this.target,{Autoplay:{showProgress:!1,timeout:1E3*this.options.scrollInterval},Dots:{minCount:2},Navigation:!1,direction:XF.isRtl()?"rtl":"ltr",on:{ready:()=>{this.target.style.overflow="visible"}},l10n:XF.CarouselL10n()},{Autoplay}))},displayFloating(a,b,c,d){XF.Animate.fadeDown(a,{speed:b,complete(){c&&setTimeout(()=>{XF.Animate.fadeUp(a);d&&XF.trigger(a.querySelector("a.js-noticeDismiss"),"click")},c)}})},getCookies(){if(!XF.config.userId){var a=XF.Cookie.get("notice_dismiss");a=
a?a.split(","):[];var b=[];for(let c of a)c=parseInt(c,10),(-1!==c||"advanced"!==XF.Cookie.getConsentMode())&&c&&b.push(c);return b}},dismiss(a){a.preventDefault();if(!this.dismissing){this.dismissing=!0;var b=a.target;a=b.closest(".js-notice");var c=parseInt(a.dataset.noticeId,10),d=XF.config.userId,e=this.getCookies();d?XF.ajax("post",b.getAttribute("href"),{},null,{skipDefault:!0}):c&&-1===e.indexOf(c)&&(e.push(c),e.sort((f,g)=>f-g),b=new Date,b.setUTCMonth(b.getUTCMonth()+1),XF.Cookie.set("notice_dismiss",
e.join(","),b));this.removeNotice(a);this.dismissing=!1}},removeNotice(a){const b=this.notices.length;let c;const d=()=>{this.slider.removeSlide(c);this.updateNoticeList();this.handleNoticeListChange()&&this.slider.reInit()};this.slider?(c=this.slider.page,1<b?(c>=this.slider.slides.length&&(c=1),setTimeout(d,500)):d()):XF.Animate.fadeUp(a,{speed:XF.config.speed.fast,complete:()=>{a.remove();this.updateNoticeList();this.handleNoticeListChange()}})}});XF.CookieConsentForm=XF.Element.newHandler({options:{container:"article.message"},
embedHtml:null,containerElement:null,anchor:null,replace:!1,init(){if(this.containerElement=this.target.closest(this.options.container))this.anchor=this.containerElement.querySelector(".u-anchorTarget");if(this.embedHtml=this.target.querySelector(".js-embedHtml"))this.replace=this.supportsTemplateElement();XF.on(k,"ajax-submit:response",this.response.bind(this));XF.on(k,"cookie-consent:load",this.load.bind(this))},response({data:a}){a.unconsented_local_storage&&XF.LocalStorage.removeMultiple(a.unconsented_local_storage);
if(a.group_consent_state)for(let b in a.group_consent_state)k.querySelector(".js-consent_"+b).checked=a.group_consent_state[b];XF.trigger(k,"cookie-consent:load",[this.target])},load({target:a}){this.replace&&this.embedHtml&&(this.target.replaceWith(this.embedHtml.content.cloneNode(!0)),this.target===a&&this.anchor&&this.anchor.scrollIntoView())},supportsTemplateElement(){return"content"in k.createElement("template")}});XF.CookieConsentToggle=XF.Event.newHandler({eventType:"click",eventNameSpace:"XFCookieConsentToggle",
notice:null,init(){const a=k.querySelector('.notice[data-notice-id="-1"]');a||console.error(`No cookie consent notice found for ${this.target}`);this.notice=a},click(a){a.preventDefault();"none"!==m.getComputedStyle(this.notice).display?XF.Animate.slideUp(this.notice,{speed:XF.config.speed.normal,complete:XF.layoutChange}):XF.Animate.slideDown(this.notice,{speed:XF.config.speed.normal,complete:XF.layoutChange})}});XF.TouchProxy=XF.Element.newHandler({options:{allowed:"input, textarea, checkbox, a, label, [data-tp-clickable], [data-tp-primary]"},
active:!0,timer:null,proxy:null,init(){if("InputDeviceCapabilities"in m||"sourceCapabilities"in UIEvent.prototype)XF.on(this.target,"click",a=>{a.sourceCapabilities&&a.sourceCapabilities.firesTouchEvents&&this.handleTapEvent(a)});else if(XF.Feature.has("touchevents")){let a=!1;XF.on(this.target,"touchstart",()=>{a=!1},{passive:!0});XF.on(this.target,"touchmove",()=>{a=!0},{passive:!0});XF.on(this.target,"touchend",b=>{a||this.handleTapEvent(b)},{passive:!0})}},isClickable(a){a=a.closest(this.options.allowed);
return null!==a&&this.target.contains(a)},handleTapEvent(a){this.getProxy()&&this.active&&!this.isClickable(a.target)&&(a.preventDefault(),this.trigger())},getProxy(){this.proxy||(this.proxy=this.target.querySelector("[data-tp-primary]")||this.target.querySelector("a[href]"));return this.proxy},trigger(){let a=this.getProxy();a&&(this.timer&&clearTimeout(this.timer),this.active=!1,a.click(),this.timer=setTimeout(()=>{this.active=!0},500))}});XF.WebShare=XF.Element.newHandler({options:{fetch:!1,url:null,
title:null,text:null,hide:null,hideContainerEls:!0},url:null,title:null,text:null,fetchUrl:null,init(){this.isSupported()&&(this.options.fetch&&(this.fetchUrl=this.options.fetch),this.hideSpecified(),this.hideContainerElements(),this.setupShareData(),this.target.classList.remove("is-hidden"),XF.on(this.target,"click",this.click.bind(this)))},isSupported(){const a=XF.browser.os;return"share"in navigator&&"https:"==m.location.protocol&&("android"==a||"ios"==a)},hideSpecified(){if(this.options.hide){var a;
null==(a=k.querySelectorAll(this.options.hide))||a.forEach(b=>{b.classList.add("is-hidden")})}},hideContainerElements(){if(this.options.hideContainerEls){var a=Array.from(this.target.closest(".block, .blockMessage"));a.length&&(a[0].querySelectorAll(".shareButtons").forEach(b=>b.classList.remove("shareButtons--iconic")),a[0].querySelectorAll(".block-minorHeader").forEach(b=>XF.display(b,"none")),a[0].querySelectorAll(".shareButtons-label").forEach(b=>XF.display(b,"none")))}},setupShareData(){if(!this.fetchUrl){if(this.options.url)this.url=
this.options.url;else{let a;this.url=null==(a=k.querySelector('meta[property="og:url"]'))?void 0:a.content;this.url||(this.url=m.location.href)}if(this.options.title)this.title=this.options.title;else{let a;this.title=null==(a=k.querySelector('meta[property="og:title"]'))?void 0:a.content;if(!this.title){let b;this.title=null==(b=k.querySelector("title"))?void 0:b.textContent}}if(this.options.text)this.text=this.options.text;else{let a;this.text=null==(a=k.querySelector('meta[property="og:description"]'))?
void 0:a.content;if(!this.text){let b;this.text=(null==(b=k.querySelector("meta[name=description]"))?void 0:b.content)||""}}}},click(a){a.preventDefault();this.fetchUrl?XF.ajax("get",this.fetchUrl,{web_share:!0},b=>{"ok"===b.status?(this.setShareOptions(b),this.share()):XF.redirect(this.options.url)},{skipDefault:!0,skipError:!0,global:!1}):this.share()},share(){navigator.share(this.getShareOptions()).catch(a=>{})},setShareOptions(a){this.url=a.contentUrl;this.title=a.contentTitle;this.text=a.contentDesc||
a.contentTitle;this.fetchUrl=null},getShareOptions(){const a={url:this.url,title:"",text:""};this.title&&(a.title=this.title);a.text=this.text?this.text:a.title;return a}});XF.MenuClick=XF.Event.newHandler({eventNameSpace:"XFMenuClick",options:{menu:null,targetOpenClass:"is-menuOpen",openClass:"is-active",completeClass:"is-complete",zIndexRef:null,menuPosRef:null,arrowPosRef:null,directionThreshold:.6},menu:null,menuPosRef:null,menuRef:null,arrowPosRef:null,arrowRef:null,scrollFunction:null,isPotentiallyFixed:!1,
menuIsUp:!1,menuWidth:0,menuHeight:0,init(){this.options.menu&&(this.menu=XF.findRelativeIf(this.options.menu,this.target));if(!this.menu||!this.menu.length)for(var a=this.target.nextElementSibling;a;){if(a.hasAttribute("data-menu")){this.menu=a;break}a=a.nextElementSibling}if(this.menu){this.arrowPosRef=this.menuPosRef=this.target;if(this.options.menuPosRef&&(a=XF.findRelativeIf(this.options.menuPosRef,this.target))&&(this.menuPosRef=a,this.options.arrowPosRef)){const b=XF.findRelativeIf(this.options.arrowPosRef,
this.target);b.closest(a)&&(this.arrowPosRef=b)}this.target.setAttribute("aria-controls",XF.uniqueId(this.menu));this.menu.querySelector(".menu-arrow")||(a=XF.createElement("span",{className:"menu-arrow"}),this.menu.insertBefore(a,this.menu.firstChild));XF.DataStore.set(this.menu,"menu-trigger",this);XF.on(this.menu,"click",b=>{b.target.closest("[data-menu-closer]")&&this.close()});XF.on(this.menu,"menu:open",()=>this.open(XF.Feature.has("touchevents")));XF.on(this.menu,"menu:close",()=>this.close());
XF.on(this.menu,"menu:reposition",()=>{this.isOpen()&&this.reposition()});XF.on(this.menu,"keydown",this.keyboardEvent.bind(this));if(a=this.menu.closest(".tooltip"))XF.on(a,"tooltip:hidden",this.close.bind(this));if(a=this.menu.dataset.menuBuilder)if(XF.MenuBuilder[a])XF.MenuBuilder[a](this.menu,this.target,this);else console.error("No menu builder "+a+" found")}else console.error("No menu found for %o",this.target)},click(a){"undefined"!==typeof a.originalEvent&&(a=a.originalEvent);if(!(a.ctrlKey||
a.shiftKey||a.altKey)||!this.target.getAttribute("href")){var b=XF.isEventTouchTriggered(a),c=!0;!b&&this.isOpen()&&(c=!1);c&&a.preventDefault();this.toggle(b,XF.NavDeviceWatcher.isKeyboardNav())}},isOpen(){return this.target.classList.contains(this.options.targetOpenClass)},toggle(a){this.isOpen()?this.close():this.open(a)},open(a){const b=this.menu,c=this.target,d=this.menuPosRef;let e=0;if(!this.isOpen()&&!b.classList.contains("is-disabled")){k.body.append(b);this.updateMenuDimensions();this.updatePositionReferences();
XF.hasFixableParent(this.target)&&(this.scrollFunction=()=>{XF.isHidden(c)?this.close():this.repositionFixed(!0)},b.classList.add("menu--potentialFixed"),XF.on(m,"scroll",this.scrollFunction));if(this.options.zIndexRef){const g=XF.findRelativeIf(this.options.zIndexRef,c);g&&(e=XF.getElEffectiveZIndex(g))}XF.setRelativeZIndex(b,c,0,e);XF.MenuWatcher.onOpen(b,a);this.reposition();c.setAttribute("aria-expanded","true");XF.Transition.addClassTransitioned(c,this.options.targetOpenClass);b.setAttribute("aria-hidden",
"false");XF.Transition.addClassTransitioned(b,this.options.openClass,()=>{XF.Transition.addClassTransitioned(b,this.options.completeClass)});XF.Transition.addClassTransitioned(d,this.options.targetOpenClass);a=XF.customEvent("menu:opened",{menu:b});XF.trigger(this.target,a);XF.trigger(b,a);if(!XF.isIOS()||!this.isPotentiallyFixed)XF.on(b,"menu:complete",()=>{setTimeout(()=>XF.autoFocusWithin(b,"[autofocus], [data-menu-autofocus]"),10)});if(a=b.dataset.href){if(!XF.DataStore.get(b,"menu-loading")){XF.DataStore.set(b,
"menu-loading",!0);var f=b.dataset.nocache?!1:!0;XF.ajax("get",a,{},g=>{f&&delete b.dataset.href;g.html&&XF.setupHtmlInsert(g.html,(h,l,p)=>{l=b.dataset.loadTarget;let n=b;l&&(n=b.querySelector(l));n.innerHTML="";XF.isCreatedContainer(h)?n.append(...h.childNodes):n.append(h);XF.trigger(this.target,XF.customEvent("menu:loaded",{html:h,menu:b}));this.updateMenuDimensions();p(!1,n);setTimeout(this.reposition.bind(this),0);XF.trigger(this.target,XF.customEvent("menu:complete",{menu:b}));XF.trigger(b,
"menu:complete")})},{cache:f?"default":"reload"}).finally(()=>XF.DataStore.set(b,"menu-loading",!1))}}else XF.trigger(this.target,XF.customEvent("menu:complete",{menu:b})),XF.trigger(b,"menu:complete")}},reposition(a,b){if(!XF.DataStore.get(this.menu,"ios-scroll-timeout")||a){this.updatePositionReferences();this.menu.style.visibility="hidden";XF.display(this.menu);this.menu.style.position="";this.menu.style.top="";this.menu.style.bottom="";this.menu.style.left="";this.menu.style.right="";a=XF.viewport(m);
var c={};c=this.getHorizontalPosition(a,c);c=this.getVerticalPosition(a,c,b);c.display="";c.visibility="";for(let d in c)this.menu.style[d]=c[d]}},repositionFixed(a){const b=this.menu;if(a&&XF.isIOS()){var c=XF.DataStore.get(b,"ios-scroll-timeout");clearTimeout(c);c=setTimeout(()=>{XF.DataStore.remove(b,"ios-scroll-timeout");this.reposition()},300);XF.DataStore.set(b,"ios-scroll-timeout",c)}else{this.updatePositionReferences();var d=XF.DataStore.get(this.target,"menu-h");a=XF.DataStore.get(b,"menu-reset-timer");
if(d&&this.menuRef.left==d[0]&&this.menuRef.width==d[1]){d=m.getComputedStyle(b);var e=XF.viewport(m),f=XF.hasFixedParent(this.target)?"fixed":"absolute",g={top:parseInt(d.top,10)};this.menuIsUp=this.menu.classList.contains("menu--up");a&&clearTimeout(a);"fixed"==f&&f!=d.position?(g={"transition-property":"none","transition-duration":"0s"},g=this.getVerticalFixedPosition(e,g)):"absolute"==f&&(g={"transition-property":"none","transition-duration":"0s"},g=this.getVerticalAbsolutePosition(e,g));for(c in g)b.style[c]=
g[c];b.classList.toggle("menu--up",this.menuIsUp);a=setTimeout(()=>{b.style.transitionProperty="";b.style.transitionDuration=""},250);XF.DataStore.set(b,"menu-reset-timer",a)}else this.reposition()}},getHorizontalPosition(a,b){var c=!1;let d=0;this.menuWidth>a.width?d=this.menuRef.left-a.left:this.menuRef.left+this.menuRef.width/2>a.width*this.options.directionThreshold?(d=0-this.menuWidth+this.menuRef.width,c=!0):this.menuRef.width>this.menuWidth&&(d=Math.floor((this.menuRef.width-this.menuWidth)/
2));d=Math.min(d,a.right-this.menuWidth-this.menuRef.left-5);d=Math.max(d,a.left-this.menuRef.left+5);b.left=this.menuRef.left+d+"px";XF.DataStore.set(this.target,"menu-h",[this.menuRef.left,this.menuRef.width,d]);this.menu.classList.toggle("menu--left",!c);this.menu.classList.toggle("menu--right",c);a=Math.min(this.arrowRef.left-this.menuRef.left+this.arrowRef.width/2-d,this.menuWidth-20);if(c=this.menu.querySelector(".menu-arrow"))c.style.top="",c.style.left=a+"px";return b},getVerticalPosition(a,
b,c){this.menuIsUp=!1;b=!c&&XF.hasFixedParent(this.target)?this.getVerticalFixedPosition(a,b):this.getVerticalAbsolutePosition(a,b);this.menu.classList.toggle("menu--up",this.menuIsUp);return b},getVerticalFixedPosition(a,b){b.top=Math.max(0,Math.round(this.menuRef.bottom)-a.top)-this.getTopShift()+"px";b.position="fixed";parseInt(b.top)+this.menuHeight+a.top>a.bottom&&this.menuRef.top-this.menuHeight>a.top?(b.top="",b.bottom=a.bottom-this.menuRef.top+5+"px",this.menuIsUp=!0):this.menuIsUp=!1;return b},
getVerticalAbsolutePosition(a,b){b.top=this.menuRef.bottom-this.getTopShift()+"px";b.position="";parseInt(b.top,10)+this.menuHeight>a.bottom&&this.menuRef.top-this.menuHeight>a.top?(b.top="",b.bottom=a.height-this.menuRef.top+5+"px",this.menuIsUp=!0):this.menuIsUp=!1;return b},getTopShift(){return this.menu.classList.contains("menu--structural")?parseInt(XF.config.borderSizeFeature,10):0},updateMenuDimensions(){let a=this.menu.style.display,b=this.menu.style.visibility;XF.display(this.menu);this.menu.style.visibility=
"hidden";this.menu.clientWidth;this.menuWidth=this.menu.offsetWidth;this.menuHeight=this.menu.offsetHeight;XF.display(this.menu,a);this.menu.style.visibility=b;return{menuWidth:this.menuWidth,menuHeight:this.menuHeight}},updatePositionReferences(){this.menuRef=XF.dimensions(this.menuPosRef,!0);this.arrowRef=this.arrowPosRef==this.menuPosRef?this.menuRef:XF.dimensions(this.arrowPosRef,!0);return{menuRef:this.menuRef,arrowRef:this.arrowRef}},close(){if(this.isOpen()){var a=this.menu;this.target.setAttribute("aria-expanded",
"false");XF.Transition.removeClassTransitioned(this.target,this.options.targetOpenClass);a.setAttribute("aria-hidden",!0);a.classList.remove(this.options.completeClass);XF.Transition.removeClassTransitioned(a,this.options.openClass);XF.Transition.removeClassTransitioned(this.menuPosRef,this.options.targetOpenClass);XF.off(m,"scroll",this.scrollFunction);XF.MenuWatcher.onClose(a);var b=XF.customEvent("menu:closed",{menu:a});XF.trigger(this.target,b);XF.trigger(a,b)}},keyboardEvent(a){if(("ArrowUp"==
a.key||"ArrowDown"==a.key)&&XF.Keyboard.isShortcutAllowed(k.activeElement)&&k.activeElement.closest(".menu")==this.menu){var b=k.activeElement;const c=b.closest(".menu").querySelectorAll("a");b=Array.from(c).indexOf(b)+("ArrowUp"==a.key?-1:1);0>b?b=c.length-1:b>=c.length&&(b=0);c[b].focus();a.preventDefault();a.stopPropagation()}}});XF.OffCanvasClick=XF.Event.newHandler({eventNameSpace:"XFOffCanvasClick",options:{menu:null,openClass:"is-active"},menu:null,init(){this.options.menu&&(this.menu=XF.findRelativeIf(this.options.menu,
this.target));this.menu||(this.menu=Array.from(this.target.nextElementSibling).find(b=>void 0!==b.dataset.menu));if(this.menu){XF.on(this.menu,"click",b=>{b.target.matches("[data-menu-close]")&&this.closeTrigger(b)});XF.on(this.menu,"off-canvas:close",this.closeTrigger.bind(this));XF.on(this.menu,"off-canvas:open",this.openTrigger.bind(this));var a=this.menu.dataset.ocmBuilder;if(a)if(XF.OffCanvasBuilder[a])XF.OffCanvasBuilder[a](this.menu,this);else console.error("No off canvas builder "+a+" found")}else console.error("No menu found for %o",
this.target)},click(a){a.preventDefault();this.toggle()},isOpen(){return this.menu.classList.contains(this.options.openClass)},toggle(){this.isOpen()?this.close():this.open()},openTrigger(a){a.preventDefault();this.open()},open(){if(!this.isOpen()){var a=this.menu;this.addOcmClasses(a);a.setAttribute("aria-hidden","false");XF.trigger(a,"off-canvas:opening");XF.Transition.addClassTransitioned(a,this.options.openClass,()=>XF.trigger(a,"off-canvas:opened"));XF.Modal.open()}},addOcmClasses(a){const b=
a.dataset.ocmClass;b&&a.classList.add(...b.split(" "));a.querySelectorAll("[data-ocm-class]").forEach(c=>{c.classList.add(...c.dataset.ocmClass.split(" "))})},removeOcmClasses(a){const b=a.dataset.ocmClass;b&&a.classList.remove(...b.split(" "));a.querySelectorAll("[data-ocm-class]").forEach(c=>{c.classList.remove(...c.dataset.ocmClass.split(" "))})},closeTrigger(a){a.preventDefault();this.close()},close(a=!1){if(this.isOpen()){var b=this.menu;b.setAttribute("aria-hidden","true");XF.trigger(b,"off-canvas:closing");
XF.Transition.removeClassTransitioned(b,this.options.openClass,()=>{XF.trigger(b,"off-canvas:closed");this.removeOcmClasses(b)},a);XF.Modal.close()}}});XF.OverlayClick=XF.Event.newHandler({eventNameSpace:"XFOverlayClick",options:{cache:!0,overlayConfig:{},forceFlashMessage:!1,followRedirects:!1,closeMenus:!0},overlay:null,loadUrl:null,loading:!1,visible:!1,init(){var a=this.getOverlayHtml();if(a)this.setupOverlay(new XF.Overlay(a,this.options.overlayConfig));else{a=this.getLoadUrl();if(!a)throw Error("Could not find an overlay for target");
this.loadUrl=a}this.options.closeMenus&&XF.MenuWatcher.closeAll()},click(a){a.preventDefault();this.toggle()},toggle(){this.overlay?this.overlay.toggle():this.show()},show(){if(this.overlay)this.overlay.show();else if(!this.loading){this.loading=!0;var a={cache:this.options.cache,beforeShow:b=>{this.overlay=b},init:this.setupOverlay.bind(this)};this.options.followRedirects&&(a.onRedirect=(b,c)=>{this.options.forceFlashMessage?XF.flashMessage(b.message,1E3,()=>XF.redirect(b.redirect)):XF.redirect(b.redirect)});
(a=XF.loadOverlay(this.loadUrl,a,this.options.overlayConfig))?a.finally(()=>{setTimeout(()=>{this.loading=!1},300)}):this.loading=!1}},hide(){this.overlay&&this.overlay.hide()},getOverlayHtml(){var a=this.target.dataset.target;let b;a&&((b=this.target.querySelector(a))||(b=k.querySelector(a)));b||(a=this.target.getAttribute("href"))&&"#"==a.substr(0,1)&&(b=k.querySelector(a));b&&!b.matches(".overlay")&&(b=XF.getOverlayHtml(b));return b?b:null},getLoadUrl(){return this.target.dataset.href||this.target.getAttribute("href")||
null},setupOverlay(a){this.overlay=a;a.on("overlay:shown",()=>{this.visible=!0});a.on("overlay:hidden",()=>{this.visible=!1});if(!this.options.cache&&this.loadUrl)a.on("overlay:hidden",()=>{this.overlay=null});return this.overlay}});XF.OverlayClick.overlayCache={};XF.ScrollToClick=XF.Event.newHandler({eventType:"click",eventNameSpace:"XFScrollToClick",options:{target:null,silent:!1,hash:null,speed:300},scroll:null,init(){var a;const b=this.options.hash,c=this.target.getAttribute("href");this.options.target&&
(a=XF.findRelativeIf(this.options.target,this.target));if(!a)if(c&&c.length&&"#"==c.charAt(0))a=k.querySelector(c);else if(this.options.silent)return;if(a)if(this.scroll=a,!0===b||"true"===b)a=a.getAttribute("id"),this.options.hash=a&&a.length?a:null;else{if(!1===b||"false"===b)this.options.hash=null}else console.error("No scroll target could be found")},click(a){this.scroll&&(a.preventDefault(),XF.smoothScroll(this.scroll,this.options.hash,this.options.speed))}});XF.StyleVariationClick=XF.Event.newHandler({eventType:"click",
eventNameSpace:"XFStyleVariationClick",options:{variation:null},init(){},click(a){a.preventDefault();XF.StyleVariation.updateVariation(this.options.variation)}});XF.Element.register("auto-complete","XF.AutoComplete");XF.Element.register("cookie-consent-form","XF.CookieConsentForm");XF.Element.register("h-scroller","XF.HScroller");XF.Element.register("icon","XF.IconRenderer");XF.Element.register("install-prompt","XF.InstallPrompt");XF.Element.register("notices","XF.Notices");XF.Element.register("number-box",
"XF.NumberBox");XF.Element.register("page-jump","XF.PageJump");XF.Element.register("quick-search","XF.QuickSearch");XF.Element.register("search-auto-complete","XF.SearchAutoComplete");XF.Element.register("share-buttons","XF.ShareButtons");XF.Element.register("sticky","XF.Sticky");XF.Element.register("sticky-header","XF.StickyHeader");XF.Element.register("style-variation-input","XF.StyleVariationInput");XF.Element.register("tooltip","XF.Tooltip");XF.Element.register("element-tooltip","XF.ElementTooltip");
XF.Element.register("member-tooltip","XF.MemberTooltip");XF.Element.register("touch-proxy","XF.TouchProxy");XF.Element.register("web-share","XF.WebShare");XF.Event.register("click","cookie-consent-toggle","XF.CookieConsentToggle");XF.Event.register("click","menu","XF.MenuClick");XF.Event.register("click","off-canvas","XF.OffCanvasClick");XF.Event.register("click","overlay","XF.OverlayClick");XF.Event.register("click","scroll-to","XF.ScrollToClick");XF.Event.register("click","style-variation","XF.StyleVariationClick")})(window,
document);
