(function(e){"undefined"===typeof e.XFExtEmbed&&(e.XFExtEmbed={debug:!0,init(){this.detectEmbeds();this.listenForNewEmbeds()},detectEmbeds(){var c=document.querySelectorAll(".js-xf-embed");for(const a of c){c=a.getAttribute("data-url");const d=a.getAttribute("data-content");this.createIframe(a,c,d)}},createIframe(c,a,d){let b=document.createElement("iframe");b.src=a+"/embed.php?content="+d;b.setAttribute("data-url",a);b.setAttribute("data-content",d);b.setAttribute("data-xf-embed-loaded","1");b.setAttribute("width",
e.getComputedStyle(c).width);b.setAttribute("frameborder","0");this.setIframeHeight(b);e.addEventListener("resize",this.setIframeHeight.bind(this,b));c.parentNode.replaceChild(b,c)},setIframeHeight(c){const a=Math.random().toString(36).substring(2,7),d=function(b){b.data.messageId===a&&(XFExtEmbed.debug&&console.log("receiving message %s for content %s (height received: %dpx)",a,c.getAttribute("data-content"),b.data.height),c.height=b.data.height+"px",e.removeEventListener("message",d))};e.addEventListener("message",
d);c.addEventListener("load",function(){XFExtEmbed.debug&&console.log("requesting message %s for content %s",a,c.getAttribute("data-content"));this.contentWindow.postMessage({messageId:a,type:"getHeight"},"*")})},listenForNewEmbeds(){(new MutationObserver(function(c){c.forEach(function(a){a=a.addedNodes;for(const d of a)if(d.classList&&d.classList.contains("js-xf-embed")){a=d.getAttribute("data-url");const b=d.getAttribute("data-content");this.createIframe(d,a,b)}}.bind(this))}.bind(this))).observe(document,
{childList:!0,subtree:!0})}},e.XFExtEmbed.init())})(window);
