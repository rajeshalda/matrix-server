((f,g)=>{XF.FormFill=XF.Element.newHandler({options:{fillers:".js-FormFiller",key:"fill",action:null},abortController:null,init(){if(this.target.matches("form"))if(this.options.action||(this.options.action=this.target.getAttribute("action"),this.options.action.includes("?")?this.options.action+="&":this.options.action+="?",this.options.action+=this.options.key+"=1"),this.options.action)XF.onDelegated(this.target,"click",this.options.fillers,this.change.bind(this));else console.error("Form filler requires an action option or attribute");
else console.error("Target must be a form")},change(){this.abortController&&(this.abortController.abort(),this.abortController=null);const {abortController:c}=XF.ajaxAbortable("post",this.options.action,this.target,this.onSuccess.bind(this));c&&(this.abortController=c)},onSuccess(c){if(c.formValues){var d=this.target;Object.entries(c.formValues).forEach(([a,b])=>{if(a=d.querySelector(a))if(["checkbox","radio"].includes(a.type)){a.checked=b?!0:!1;const e=XF.customEvent("click",{triggered:!0});XF.trigger(a,
e);b=XF.customEvent(b?"control:enabled":"control:disabled");XF.trigger(a,b)}else["SELECT","INPUT","TEXTAREA"].includes(a.tagName)&&(a.value=b,"TEXTAREA"===a.tagName&&(b=XF.Element.getHandler(a,"textarea-handler"))&&b.update())})}}});XF.Element.register("form-fill","XF.FormFill")})(window,document);
