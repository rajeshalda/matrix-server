((g,e)=>{XF.ThreadEditForm=XF.Element.newHandler({options:{itemSelector:null},item:null,inlineEdit:null,init(){if(this.item=e.querySelector(this.options.itemSelector))XF.on(this.target,"ajax-submit:before",this.beforeSubmit.bind(this)),XF.on(this.target,"ajax-submit:response",this.afterSubmit.bind(this)),this.inlineEdit=XF.createElementFromString('<input type="hidden" name="_xfInlineEdit" value="1" />')},beforeSubmit(){this.target.appendChild(this.inlineEdit)},afterSubmit(c){const {data:a}=c;a.errors||
a.exception||(c.preventDefault(),a.message&&XF.flashMessage(a.message,3E3),XF.setupHtmlInsert(a.html,(b,d,f)=>{this.item.innerHTML="";this.item.append(...b.childNodes);f(!1,b)}),XF.hideParentOverlay(this.target))}});XF.QuickThread=XF.Element.newHandler({options:{focusActivate:".js-titleInput",focusActivateTarget:".js-quickThreadFields",focusActivateHref:null,insertTarget:".js-threadList",replaceTarget:".js-emptyThreadList"},xfInserter:null,activated:!1,loading:!1,init(){const c=e.querySelector(this.options.focusActivate);
c&&(this.xfInserter=new XF.Inserter(c,{href:this.options.focusActivateHref,replace:this.options.focusActivateTarget,afterLoad:()=>{setTimeout(()=>{this.activated=!0;XF.trigger(this.target,"draft:sync")},500)}}),XF.on(c,"focus",a=>{if(!e.querySelector(this.options.focusActivateTarget).hasChildNodes()){const b={},d=this.target.querySelector(".js-prefixSelect");d&&(b.prefix_id=d.value);this.xfInserter.onEvent(a,b)}}));XF.on(this.target,"ajax-submit:response",this.afterSubmit.bind(this));XF.on(this.target,
"reset",this.reset.bind(this));XF.on(this.target,"draft:beforesave",a=>{this.activated||a.preventDefault()})},afterSubmit(c){const {data:a}=c;this.loading||(this.loading=!0,a.errors||a.exception?this.loading=!1:(c.preventDefault(),a.redirect&&XF.redirect(a.redirect),XF.setupHtmlInsert(a.html,(b,d,f)=>{XF.hideTooltips();XF.display(b,"none");d=e.querySelector(this.options.insertTarget);"asc"===this.options.direction?d.append(b):d.prepend(b);(d=e.querySelector(this.options.replaceTarget))&&d.parentNode.replaceChild(b,
d);this.reset(null,()=>{XF.Animate.fadeDown(b,{display:"table"});const h=this.target.closest(".block-container").getBoundingClientRect().top+g.scrollY-60;XF.smoothScroll(h,!1,null,!0);this.loading=!1});f()})))},reset(c,a){const b=e.querySelector(this.options.focusActivateTarget);XF.hideTooltips();XF.Animate.fadeUp(b,{complete:()=>{this.activated=!1;b.innerHTML="";c&&"reset"==c.type||this.target.reset();"function"==typeof a&&a()}})}});XF.Element.register("thread-edit-form","XF.ThreadEditForm");XF.Element.register("quick-thread",
"XF.QuickThread")})(window,document);
