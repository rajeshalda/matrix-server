((k,g)=>{XF.TemplateMerger=XF.Element.newHandler({options:{resolveButton:".js-resolveButton",chosenElement:".diffList-line--u, .diffList-conflict.is-resolved .is-chosen"},buttons:[],submitButtons:[],init(){const a=this.target;var c=a.querySelectorAll(this.options.resolveButton);this.buttons=Array.from(c);c.length&&(c=a.querySelectorAll('button[type="submit"]'),c.forEach(d=>{d.classList.add("is-disabled");d.disabled=!0}),this.submitButtons=Array.from(c),XF.onDelegated(a,"click",this.options.resolveButton,
this.resolveClick.bind(this)));XF.onDelegated(a,"click",this.options.chosenElement,this.chosenClick.bind(this))},resolveClick(a){var c=a.target.matches(this.options.resolveButton)?a.target:a.target.closest(this.options.resolveButton);a=c.closest(".js-conflictContainer");const d=a.querySelector(".js-mergedInput");c=a.querySelectorAll(c.dataset.target);const b=c[0],f=[];c.forEach(e=>{(e=e.querySelector("input[type=hidden]"))&&f.push(e)});if(0===f.length)d.name="";else if(1===f.length)d.value=f[0].value;
else{const e=[];f.forEach(h=>e.push(h.value));d.value=e.join("\n")}for(const e of a.children)e.style.display="none";a.classList.add("is-resolved");b.classList.add("is-chosen");b.style.display="";d&&(b.innerHTML=`<span>${XF.htmlspecialchars(d.value)}</span><br>`);[...this.buttons].filter(e=>"none"!==e.closest(".diffList-resolve").style.display).length||this.submitButtons.forEach(e=>{e.classList.remove("is-disabled");e.disabled=!1});1<c.length&&XF.trigger(b,"click")},chosenClick(a){a=a.target.matches(this.options.chosenElement)?
a.target:a.target.closest(this.options.chosenElement);const c=a.querySelector("span");if(c){var d=a.querySelector("input[type=hidden]");d&&d.name||(d=a.closest(".js-conflictContainer").querySelector(".js-mergedInput"));if(d){c.style.display="none";var b=a.querySelector("textarea");b||(b=g.createElement("textarea"),b.className="input",b.rows=1,b.value=d.value,a.appendChild(b),XF.Element.applyHandler(b,"textarea-handler"),XF.on(b,"blur",()=>{d.value=b.value;c.innerHTML=`${XF.htmlspecialchars(b.value)}`;
c.style.display="";b.style.display="none"}));b.style.display="";b.focus()}}}});XF.Element.register("template-merger","XF.TemplateMerger")})(window,document);
